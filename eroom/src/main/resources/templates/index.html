<!DOCTYPE html>
<html lang="ko-KR" dir="ltr"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{include/layout}">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  <style>
    .attendance-card {
      max-width: 380px;
      margin: 0 auto;
    }
    .attendance-card .card-body {
      padding: 1.5rem;
    }
    .current-time {
      font-size: 0.9rem;
      color: #6c757d;
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .profile-img {
      width: 64px;
      height: 64px;
    }
    .btn-wrap {
      border-top: 1px dashed #dee2e6;
      padding-top: 1rem;
      margin-top: 1rem;
    }
    .btn-wrap .btn {
      min-width: 120px;
    }

    /* â–¶ Grid ë ˆì´ì•„ì›ƒ ì •ì˜ */
    .custom-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 239.81px;
    }
    .span-two-rows {
      grid-row: span 2; /* ì„¸ë¡œë¡œ 2ì¹¸ í•©ì¹˜ê¸° */
    }
	
	.fixed-card {
	     width: 311.33px;
	     height: 207.81px;
	     background: #fff; /* í•„ìš”ì— ë”°ë¼ ë°°ê²½ìƒ‰ ì§€ì • */
	     border-radius: .25rem;
	     box-shadow: 0 .125rem .25rem rgba(0,0,0,.075);
	   }
	


	/* ìŠ¤í¬ë¡¤ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì„ íƒì‚¬í•­ */
	.fc-scroller {
	    max-height: 330px !important;
	    overflow-y: auto !important;
	     
	  }
	
	  #calendarContainer {
	    overflow: hidden;
	  }
	
	  .fc-scroller::-webkit-scrollbar {
	    width: 6px;
	  }
	
	  .fc-scroller::-webkit-scrollbar-thumb {
	    background-color: rgba(0, 0, 0, 0.1);
	    border-radius: 10px;
	  }
	
	  /* ë‚ ì§œ ì˜ì—­ ì œê±° */
	  .fc-list-day-text,
	  .fc-list-day-cushion {
	    display: none !important;
	  }
	
	  /* ê°€ìš´ë° ì  ì œê±° */
	  .fc-list-event-graphic {
	    display: none !important;
	  }
	  
	   
	  .fc-list-event-time {
	  width: 30% !important;
	}
	.fc-list-event-graphic {
	  display: none !important;
	  width: 0 !important;
	}
	.fc-list-event-title {
	  width: 70% !important;
	  overflow: hidden;
	  text-align: center;
	  text-overflow: ellipsis;
	}
	.fc-list-table {
	  table-layout: fixed !important;
	  width: 100%;
	}
	.fc-list-event-time {
	  width: 30% !important;
	  font-size: 11.5px;
	  white-space: nowrap;
	  overflow: hidden;
	  text-overflow: ellipsis;
	  text-align: left;
	  padding-left: 6px;
	}
	
	/* ë‰´ìŠ¤ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.news-card {
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 380px; /* ê¸°ì¡´ ì¹´ë“œ ì‚¬ì´ì¦ˆì™€ ë§ì¶”ê¸° */
  margin: 0 auto;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.news-card img {
  width: 120px;  /* ì´ë¯¸ì§€ ë„ˆë¹„ */
  height: 100px;  /* ì´ë¯¸ì§€ ë†’ì´ */
  object-fit: cover;  /* ì´ë¯¸ì§€ ë¹„ìœ¨ì„ ë§ì¶”ê³  ìë¥´ê¸° */
  margin-right: 15px;  /* ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ê°„ ê°„ê²© */
  border-radius: 8px;
}

.news-card .card-body {
  display: flex;
  align-items: center;
}

.news-card .card-title {
  font-size: 1.1rem;
  font-weight: bold;
}

.news-card .card-text {
  font-size: 0.9rem;
  color: #666;
  height: 60px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ê²°ì¬ ê´€ë ¨ ìŠ¤íƒ€ì¼ íƒœê·¸ */
.bg-primary-soft {
  background-color: rgba(13, 110, 253, 0.1); /* Bootstrap primary with íˆ¬ëª…ë„ */
}
.bg-success-soft {
  background-color: rgba(25, 135, 84, 0.1); /* Bootstrap success with íˆ¬ëª…ë„ */
}
.bg-fail-soft {
  background-color: rgba(253, 175, 171, 0.5); /* 50% íˆ¬ëª…ë„ ì ìš© */
}
.bg-warning-soft {
    background-color: rgba(255, 193, 7, 0.1); /* Bootstrap Warning ìƒ‰ìƒì— íˆ¬ëª…ë„ ì ìš© */
}


.carousel-indicators {
  bottom: -26px; /* âœ… ê¸°ë³¸ë³´ë‹¤ ì•„ë˜ë¡œ ë‚´ë¦¼ */
  justify-content: center; /* âœ… ê°€ìš´ë° ì •ë ¬ (ê¸°ë³¸) */
} 

.carousel-indicators [data-bs-target] {
  width: 10px;
  height: 3px;
/*   background-color: rgba(13, 110, 253, 0.5); */ /* ë°˜íˆ¬ëª… primary */
  background-color: rgba(108, 117, 125, 0.5); /* secondary ë°˜íˆ¬ëª… */  
  border: none;
}

.carousel-indicators .active {
 /*  background-color: #0d6efd; */ /* í™œì„±í™”ëœ ì  */
  background-color: #6c757d; /* secondary ì§„í•œ ìƒ‰ */  
}
/* ê²°ì¬ ê´€ë ¨ ìŠ¤íƒ€ì¼ íƒœê·¸ */
	
  </style>
</head>
<body>
<main class="main" id="top">
  <div layout:fragment="content">
    <div class="container-fluid px-0">
      <div class="custom-grid">

        <!-- 1í–‰Â·1ì—´: ì¶œí‡´ê·¼ ì¹´ë“œ -->
        <div class="text-white p-1">
          <div class="attendance-card mx-auto">
            <div class="card shadow-sm border-0">
              <div class="card-body text-center p-4">
                <form id="attendanceForm" th:action="@{/log}" method="post">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf_token}">
                  <input type="hidden" th:value="${#authentication.principal.employee.employeeNo}" name="employeeNo">
                  <input type="hidden" name="attendanceType" id="attendanceType">

                  <div id="currentTime" class="current-time fw-semibold mb-2"></div>
                  <div class="d-flex justify-content-center mb-3">
                    <img id="profileImage" class="rounded-circle me-3 profile-img"
                         src="" alt="í”„ë¡œí•„" style="display: none;">
                    <div class="text-start">
                      <p class="fw-semibold fs-8 mb-0" th:text="${employee.employeeName}">ì´ë¦„</p>
                      <small th:if="${employee.structure != null}"
                             th:text="|${employee.structure.codeName} / ${employee.employeePosition}|">
                        ë¶€ì„œ / ì§ê¸‰
                      </small>
                      <small th:if="${employee.structure == null}"
                             th:text="|- / ${employee.employeePosition}|">
                        ë¶€ì„œ / ì§ê¸‰
                      </small>
                    </div>
                  </div>

                  <div class="btn-wrap d-flex justify-content-center gap-2">
                    <button id="checkInBtn" class="btn btn-outline-primary btn-sm"
                            th:attr="disabled=${attendanceStatus != 'notCheckedIn'} ? 'disabled' : null"
                            th:text="${attendanceStatus == 'checkedIn' || attendanceStatus == 'checkedOut'} ? ${checkInTime} : 'ì¶œê·¼í•˜ê¸°'">
                      ì¶œê·¼í•˜ê¸°
                    </button>
                    <button id="checkOutBtn" class="btn btn-primary btn-sm"
                            th:attr="disabled=${attendanceStatus != 'checkedIn'} ? 'disabled' : null"
                            th:text="${attendanceStatus == 'checkedOut'} ? ${checkOutTime} : 'í‡´ê·¼í•˜ê¸°'">
                      í‡´ê·¼í•˜ê¸°
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- 1í–‰Â·2ì—´ ê²°ì¬ -->
        <div class="text-white p-1">
			<div class="attendance-card mx-auto">
				<div class="card shadow-sm border-0">
					<div class="card-body text-center p-4" style="height: 207.81px;">
						

	

<!-- Tab ë©”ë‰´ -->
<div class="d-flex justify-content-between align-items-center mb-2">
  <div class="fw-bold text-dark" style="font-size: 0.9rem;">ê²°ì¬</div>
  <ul class="nav nav-underline fs-9" id="resTab" role="tablist" style="margin-bottom: 0;">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" id="approvalPending-tab" data-bs-toggle="tab" href="#approvalPendingTab"
         role="tab" aria-controls="approvalPendingTab" aria-selected="true">ë‚´ê²Œ ì˜¨ ê²°ì¬</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="approvalOngoing-tab" data-bs-toggle="tab" href="#approvalOngoingTab"
         role="tab" aria-controls="approvalOngoingTab" aria-selected="false">ì§„í–‰ ì¤‘ ê²°ì¬</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="approvalCompleted-tab" data-bs-toggle="tab" href="#approvalCompletedTab"
         role="tab" aria-controls="approvalCompletedTab" aria-selected="false">ì™„ë£Œëœ ê²°ì¬</a>
    </li>
  </ul>
</div>

<!-- íƒ­ ë‚´ìš© -->
<div class="tab-content">

  <!-- ìŠ¹ì¸/ë°˜ë ¤ ëŒ€ê¸° -->
  <div class="tab-pane fade show active" id="approvalPendingTab">
    <div class="carousel slide" id="approvalPendingCarousel">

      <!-- âœ… ì¸ë””ì¼€ì´í„° -->
      <div class="carousel-indicators" id="pendingCarouselIndicators">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
      <div class="carousel-inner px-4 text-center" id="pendingCarouselInner">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
      <button class="position-absolute border-0 bg-transparent text-secondary"
        type="button" data-bs-target="#approvalPendingCarousel" data-bs-slide="prev"
        style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-left fs-7"></i>
      </button>
      <button class="position-absolute border-0 bg-transparent text-secondary"
              type="button" data-bs-target="#approvalPendingCarousel" data-bs-slide="next"
              style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-right fs-7"></i>
      </button>

    </div>
  </div>

  <!-- ì§„í–‰ ì¤‘ ê²°ì¬ -->
  <div class="tab-pane fade" id="approvalOngoingTab">
    <div class="carousel slide" id="approvalOngoingCarousel">

      <!-- âœ… ì¸ë””ì¼€ì´í„° -->
      <div class="carousel-indicators" id="ongoingCarouselIndicators">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
      <div class="carousel-inner px-4 text-center" id="ongoingCarouselInner">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
      <button class="position-absolute border-0 bg-transparent text-secondary"
        type="button" data-bs-target="#approvalOngoingCarousel" data-bs-slide="prev"
        style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-left fs-7"></i>
      </button>
      <button class="position-absolute border-0 bg-transparent text-secondary"
              type="button" data-bs-target="#approvalOngoingCarousel" data-bs-slide="next"
              style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-right fs-7"></i>
      </button>

    </div>
  </div>


  <!-- ìŠ¹ì¸ëœ ê²°ì¬ -->
  <div class="tab-pane fade" id="approvalCompletedTab">
    <div class="carousel slide" id="approvalCompletedCarousel">

      <!-- âœ… ì¸ë””ì¼€ì´í„° -->
      <div class="carousel-indicators" id="completedCarouselIndicators">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
      <div class="carousel-inner px-4 text-center" id="completedCarouselInner">
        <!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
      </div>

      <!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
      <button class="position-absolute border-0 bg-transparent text-secondary"
        type="button" data-bs-target="#approvalCompletedCarousel" data-bs-slide="prev"
        style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-left fs-7"></i>
      </button>
      <button class="position-absolute border-0 bg-transparent text-secondary"
              type="button" data-bs-target="#approvalCompletedCarousel" data-bs-slide="next"
              style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
        <i class="fas fa-chevron-right fs-7"></i>
      </button>

    </div>
  </div>

</div>

				        
				        
				        
				        
					</div>
				</div>
			</div>
        </div>

        <!-- 1~2í–‰Â·3ì—´ (ìœ„ ë‘ ì¹¸ í•©ì¹¨) -->
					<div class="text-white p-1 span-two-rows">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0" style="height: 447.62px;">
								<div class="card-body p-2 d-flex flex-column h-100"
									style="overflow: hidden;">
									<br>
									<!-- ì—¬ê¸° overflow: hidden ì¶”ê°€ -->
									<h3 class="fw-bold text-dark mb-2 text-start"  >ì˜¤ëŠ˜ ì¼ì •</h3>
									<div class="text-end mb-3" style="margin-top: 0.25rem;">
										<a href="/calendar/all"
											class="text-decoration-none text-primary"
											style="font-size: 0.8rem;"> ìº˜ë¦°ë”ë¡œ ê°€ê¸° â†’ </a>
									</div>
									<div id="calendarContainer" class="flex-grow-1">
										<div id="appCalendar"></div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 2í–‰Â·1ì—´ -->
		<div class="text-white p-1">
		  <div class="attendance-card mx-auto">
		    <div class="card shadow-sm border-0">
		      <div id="projectSummary" class="card-body text-start p-4" style="height: 207.81px;">
		      </div>
		    </div>
		  </div>
		</div>


        <!-- 2í–‰Â·2ì—´ ì˜ˆì•½í•˜ê¸° ì˜ˆì•½ í˜„í™© ë³´ê¸° -->
		  <div class="text-white p-1">
		  <div class="attendance-card mx-auto">
		    <div class="card shadow-sm border-0">
		      <div class="card-body p-4" style="height: 207.81px;">
		
		        <!-- ì œëª©(ì™¼ìª½) + íƒ­ë²„íŠ¼(ì˜¤ë¥¸ìª½) -->
		        <div class="d-flex justify-content-between align-items-center mb-2">
		          <div class="fw-bold text-dark" style="font-size: 0.9rem;">ì˜¤ëŠ˜ ì˜ˆì•½ í˜„í™©</div>
		          <ul class="nav nav-underline fs-9" id="resTab" role="tablist" style="margin-bottom: 0;">
		            <li class="nav-item" role="presentation">
		              <a class="nav-link active" id="vehicle-tab" data-bs-toggle="tab" href="#tab-vehicle"
		                 role="tab" aria-controls="tab-vehicle" aria-selected="true">ì°¨ëŸ‰</a>
		            </li>
		            <li class="nav-item" role="presentation">
		              <a class="nav-link" id="room-tab" data-bs-toggle="tab" href="#tab-room"
		                 role="tab" aria-controls="tab-room" aria-selected="false">íšŒì˜ì‹¤</a>
		            </li>
		          </ul>
		        </div>
		
		        <!-- ëª©ë¡ í…Œì´ë¸” ì¤‘ì•™ ì •ë ¬ -->
		        <div class="tab-content small d-flex justify-content-center" id="resTabContent"
		             style="font-size: 0.7rem; height: 110px; overflow-y: auto;">
		          <div class="tab-pane fade show active w-100" id="tab-vehicle" role="tabpanel" aria-labelledby="vehicle-tab">
		            <table class="table table-sm table-striped mb-0 text-center" style="font-size: 0.65rem;">
		              <thead>
		                <tr>
		                  <th>ì°¨ëŸ‰</th>
		                  <th>ì˜ˆì•½ì</th>
		                  <th>ì‹œê°„</th>
		                </tr>
		              </thead>
		              <tbody>
		                <tr th:if="${#lists.isEmpty(todayReservations)}">
		                  <td colspan="3">ğŸš— ì—†ìŒ</td>
		                </tr>
		                <tr th:each="res : ${todayReservations}">
		                  <td th:text="${res.vehicleName}"></td>
		                  <td th:text="${res.reserverName}"></td>
		                  <td>
		                    <span th:text="${#temporals.format(res.reservation_start, 'HH:mm')}"></span> ~
		                    <span th:text="${#temporals.format(res.reservation_end, 'HH:mm')}"></span>
		                  </td>
		                </tr>
		              </tbody>
		            </table>
		          </div>
		
		          <div class="tab-pane fade w-100" id="tab-room" role="tabpanel" aria-labelledby="room-tab">
		            <table class="table table-sm table-striped mb-0 text-center" style="font-size: 0.65rem;">
		              <thead>
		                <tr>
		                  <th>íšŒì˜ì‹¤</th>
		                  <th>ì˜ˆì•½ì</th>
		                  <th>ì‹œê°„</th>
		                </tr>
		              </thead>
		              <tbody>
		                <tr th:if="${#lists.isEmpty(todayRoomReservations)}">
		                  <td colspan="3">ğŸ¢ ì—†ìŒ</td>
		                </tr>
		                <tr th:each="res : ${todayRoomReservations}">
		                  <td th:text="${res.meetingRoomName}"></td>
		                  <td th:text="${res.reserverName}"></td>
		                  <td>
		                    <span th:text="${#temporals.format(res.reservation_start, 'HH:mm')}"></span> ~
		                    <span th:text="${#temporals.format(res.reservation_end, 'HH:mm')}"></span>
		                  </td>
		                </tr>
		              </tbody>
		            </table>
		          </div>
		        </div>
		
		      </div>
		    </div>
		  </div>
		</div>






        <!-- 3í–‰Â·1ì—´ -->
        <div class="text-dark p-1">
			<div class="attendance-card mx-auto">
				<div class="card shadow-sm border-0">
					<div class="card-body text-center p-4" style="height: 207.81px;">
						ë©”ì¼<br>(ì½ì§€ ì•Šì€ ë©”ì¼ / ê°œìˆ˜)
					</div>
				</div>
			</div>
        </div>

        <!-- 3í–‰Â·2ì—´ -->
        <!-- <div class="text-white p-1">
			<div class="attendance-card mx-auto">
				<div class="card shadow-sm border-0">
					<div class="card-body text-center p-4" style="height: 207.81px;">
						ë‚ ì”¨<br>(ì˜¤ëŠ˜)
					</div>
				</div>
			</div>
        </div> -->
        <div class="text-white p-1">
		  <div class="attendance-card mx-auto">
		    <div class="attendance-card mx-auto">
		      <div class="card shadow-sm border-0">
		        <div class="card-body" style="text-align: center;">
		          <!-- ë„ì‹œëª…ê³¼ ì…€ë ‰íŠ¸ ë°•ìŠ¤ë¥¼ ê°™ì€ ì¤„ì— ë°°ì¹˜ -->
		          <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
		            <h3 id="city-name" class="card-header" style="font-size: 1.5rem; font-weight: bold; color: black; margin: -10px 0 1rem 0;">ë„ì‹œëª…</h3>
		            <select id="city-selector" style="padding: 5px 10px; background-color: white; color: black; border: 2px solid #00bfff; border-radius: 12px; font-size: 0.9rem; width: 120px; margin-left: 10px; appearance: none; cursor: pointer; transition: all 0.3s ease-in-out; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">
		              <option value="current">í˜„ì¬ ìœ„ì¹˜</option>
		              <option value="Seoul">ì„œìš¸</option>
		              <option value="Busan">ë¶€ì‚°</option>
		              <option value="Incheon">ì¸ì²œ</option>
		              <option value="Daegu">ëŒ€êµ¬</option>
		              <option value="Daejeon">ëŒ€ì „</option>
		              <option value="Gwangju">ê´‘ì£¼</option>
		              <option value="Suwon">ìˆ˜ì›</option>
		              <option value="Changwon">ì°½ì›</option>
		              <option value="Gimhae">ê¹€í•´</option>
		              <option value="Jeonju">ì „ì£¼</option>
		              <option value="Cheongju">ì²­ì£¼</option>
		              <option value="Jeju">ì œì£¼</option>
		            </select>
		          </div>
		          <div class="card-content" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; height: 100%;">
		            <div class="weather-info" style="display: flex; flex-direction: column; align-items: flex-start;">
		              <p id="temperature" style="margin: 5px 0; color: black;">ê¸°ì˜¨: --â„ƒ</p>
		              <p id="description" style="margin: 5px 0; color: black;">ë‚ ì”¨: --</p>
		              <p id="humidity" style="margin: 5px 0; color: black;">ìŠµë„: --%</p>
		              <p id="wind" style="margin: 5px 0; color: black;">ë°”ëŒ: -- m/s</p>
		            </div>
		            <img id="weather-icon" src="" alt="ë‚ ì”¨ ì•„ì´ì½˜" style="width: 100px; height: 100px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;" 
   						 onmouseover="this.style.transform = 'scale(1.1)'; this.style.boxShadow = '0 6px 15px rgba(0, 0, 0, 0.2)';" onmouseout="this.style.transform = 'scale(1)'; this.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.1)';" />
		          </div>
		        </div>
		      </div>
		    </div>
		  </div>
		</div>


        <!-- 3í–‰Â·3ì—´ ë‰´ìŠ¤ ì¹´ë“œ -->
		<div class="text-white p-1">
		  <div class="attendance-card mx-auto">
		    <div class="card shadow-sm border-0">
		      <!-- ì˜¤ëŠ˜ì˜ IT ë‰´ìŠ¤ ì œëª© -->
		      <div class="card-header" style="text-align: center; font-size: 1.5rem; font-weight: bold; padding: 15px;">
		        ì˜¤ëŠ˜ì˜ IT ë‰´ìŠ¤
		      </div>
		      
		      <a id="newsLink" href="#" target="_blank">
		        <div class="card-body p-4" style="display: flex; align-items: center; height: 207.81px;">
		          <!-- ì™¼ìª½: ì´ë¯¸ì§€ -->
		          <img id="newsImage" class="card-img-left" alt="News Image" style="width: 120px; height: 100px; object-fit: cover; margin-right: 15px; border-radius: 8px;">
		          
		          <!-- ì˜¤ë¥¸ìª½: ë‚´ìš© -->
		          <div>
		            <h5 class="card-title" id="newsTitle">ì˜¤ëŠ˜ì˜ IT ë‰´ìŠ¤</h5>
		            <p class="card-text" id="newsDescription" style="font-size: 0.9rem; color: #666; height: 60px; overflow: hidden; text-overflow: ellipsis;">ë‰´ìŠ¤ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
		          </div>
		        </div>
		      </a>
		    </div>
		  </div>
		</div>

      </div>
    </div>
    <script>
    //ìº˜ë¦°ë”
   document.addEventListener('DOMContentLoaded', function () {
			  setTimeout(() => {
			    const todayStr = new Date().toISOString().slice(0, 10); // yyyy-MM-dd
			    const calendarEl = document.getElementById('appCalendar');

			    const insertedTables = new Set(); // colgroup ì¤‘ë³µ ì‚½ì… ë°©ì§€

			    const calendar = new FullCalendar.Calendar(calendarEl, {
			      initialView: 'listDay',
			      locale: 'ko',
			      headerToolbar: false,
			      eventTimeFormat: {
			    	    hour: '2-digit',
			    	    minute: '2-digit',
			    	    hour12: false  // 24ì‹œê°„ì œë¡œ ì„¤ì •
			    	  },
			      validRange: {
			        start: todayStr,
			        end: todayStr
			      },
			      height: '100%',
			      contentHeight: 'auto',
			      eventSources: [
			        {
			          url: '/calendar/list/all',
			          method: 'GET',
			          failure: () => console.error('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨'),
			          success: function (events) {
			              //console.log("ë°›ì•„ì˜¨ ì¼ì • ëª©ë¡:", events); // ì‘ë‹µ í™•ì¸ìš©
			              return events;
			        	}
			         }
			      ],
			      eventDidMount: function (info) {
			        const separator = info.event.extendedProps.separator || "";
			        const event = info.event;
			        const teamName = event.extendedProps.teamName || '';
			        const title = event.title;

			        if (teamName && title && !title.startsWith(`[${teamName}]`)) {
			          event.setProp("title", `[${teamName}] ${title}`);
			        }

			        // ìƒ‰ìƒ ìŠ¤íƒ€ì¼ ì§€ì •
			        let backgroundColor = "#DDDDDD";
			        let borderColor = "#CCCCCC";
			        let textColor = "#000000";

			        if (separator.startsWith("A")) {
			          backgroundColor = "#F8D7DA";
			          borderColor = "#F5C6CB";
			          textColor = "#721C24";
			        }

			        if (separator.startsWith("T")) {
			          backgroundColor = "#BDE0FE";
			          borderColor = "#7FBFFF";
			          textColor = "#003366";
			        }

			        const titleEl = info.el.querySelector('.fc-list-event-title');
			        if (titleEl) {
			          
			          titleEl.style.backgroundColor = backgroundColor;
			          titleEl.style.border = `1px solid ${borderColor}`;
			          titleEl.style.color = textColor;
			          titleEl.style.borderRadius = "8px";			          
			          titleEl.style.padding = "4px 8px";
			          titleEl.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
			          titleEl.style.fontWeight = "500";
			          titleEl.style.fontSize = "14px";
			        }

			        // colgroup ì‚½ì… 
			        const table = document.querySelector('table.fc-list-table');
			        if (table && !insertedTables.has(table)) {
			          const colgroup = document.createElement('colgroup');

			          const col1 = document.createElement('col');
			          col1.style.width = '30%';

			          const col2 = document.createElement('col');
			          col2.style.width = '0';
			          col2.style.display = 'none';

			          const col3 = document.createElement('col');
			          col3.style.width = '70%';

			          colgroup.appendChild(col1);
			          colgroup.appendChild(col2);
			          colgroup.appendChild(col3);

			          const thead = table.querySelector('thead');
			          if (thead) {
			            table.insertBefore(colgroup, thead);
			          } else {
			            table.prepend(colgroup);
			          }

			          insertedTables.add(table);
			        }
			      }
			    });

			    calendar.render();

			    // ìŠ¤í¬ë¡¤ ì¡°ì •
			    setTimeout(() => {
			      const scroller = document.querySelector('.fc-scroller');
			      if (scroller) {
			        scroller.style.maxHeight = '300px';
			        scroller.style.overflowY = 'auto';
			      }
			    }, 300);
			  }, 100);
			});

    
      document.addEventListener('DOMContentLoaded', function(){
        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        function updateCurrentTime() {
          const now = new Date();
          const year = now.getFullYear();
          const month = String(now.getMonth()+1).padStart(2,'0');
          const date = String(now.getDate()).padStart(2,'0');
          const hours = String(now.getHours()).padStart(2,'0');
          const minutes = String(now.getMinutes()).padStart(2,'0');
          const seconds = String(now.getSeconds()).padStart(2,'0');
          const formattedDateTime = `${year}ë…„${month}ì›”${date}ì¼ ${hours}:${minutes}:${seconds}`;
          document.getElementById('currentTime').innerText = formattedDateTime;
        }
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);

        const attendanceForm = document.getElementById('attendanceForm');
        const attendanceType = document.getElementById('attendanceType');
        const checkInBtn = document.getElementById('checkInBtn');
        const checkOutBtn = document.getElementById('checkOutBtn');

        // ì¶œê·¼
        checkInBtn.addEventListener('click', function(e){
          e.preventDefault();
          attendanceType.value = 'checkIn';
          const now = new Date();
          const time = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
          const formData = new FormData(attendanceForm);
          fetch("/log", {
            method: 'post',
            headers: {
              'header': document.querySelector('meta[name="_csrf_header"]').content,
              'X-CSRF-Token': document.querySelector('meta[name="_csrf"]').content
            },
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            alert(data.res_msg);
            if(data.res_code == 200){
              localStorage.setItem("attendanceStatus","checkedIn");
              localStorage.setItem("checkInTime",time);
              localStorage.setItem("attendanceDate",new Date().toISOString().split('T')[0]);
              location.reload();
            }
          })
          .catch(error => {
            console.error('ì¶œê·¼ ì˜¤ë¥˜:',error);
            alert('ì¶œê·¼ ì‹¤íŒ¨');
          });
        });

        // í‡´ê·¼
        checkOutBtn.addEventListener('click', function(e){
          e.preventDefault();
          if(!confirm("í‡´ê·¼ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
          attendanceType.value = 'checkOut';
          const now = new Date();
          const time = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
          const formData = new FormData(attendanceForm);
          fetch("/log", {
            method:'post',
            headers:{
              'header': document.querySelector('meta[name="_csrf_header"]').content,
              'X-CSRF-Token': document.querySelector('meta[name="_csrf"]').content
            },
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            alert(data.res_msg);
            if(data.res_code == 200){
              localStorage.setItem("attendanceStatus","checkedOut");
              localStorage.setItem("checkOutTime",time);
              localStorage.setItem("attendanceDate",new Date().toISOString().split('T')[0]);
              location.reload();
            }
          })
          .catch(error => {
            console.error('í‡´ê·¼ ì˜¤ë¥˜',error);
            alert('í‡´ê·¼ ì‹¤íŒ¨');
          });
        });

        const today = new Date().toISOString().split('T')[0];
        if(localStorage.getItem("attendanceDate") === today){
          // í•„ìš”ì‹œ ìƒíƒœ ë³µêµ¬ ë¡œì§ ë„£ê¸°
        }
        
        // í”„ë¡œí•„ ì‚¬ì§„
		const profile = document.getElementById('profileImage');
        fetch('/profile/image')
        	.then(response => response.json())
        	.then(data => {
        		if(data.profileImage){
        			if(profile){
        				profile.onload = () => profile.style.display = 'inline';
        				profile.src = data.profileImage;
        			}
        		}
        	})
        	.catch(error => {
        		console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ : ',error);
        	});
      });
    </script>
    
    <script>
    // ë‚´ í”„ë¡œì íŠ¸ ê°œìˆ˜
  fetch('/project/myProjectCount', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      [document.querySelector('meta[name="_csrf_header"]').content]: 
        document.querySelector('meta[name="_csrf"]').content
    }
  })
  .then(res => res.json())
  .then(data => {
    if (data.res_code === '200') {
      const summaryBox = document.getElementById('projectSummary');
      summaryBox.innerHTML = `
    	  <div class="fw-bold fs-7 position-absolute top-0 start-0 mt-2 ms-3 text-dark">ì°¸ì—¬ í”„ë¡œì íŠ¸</div>
    	  <div class="d-flex justify-content-center align-items-center h-100 gap-4">
    	    <div class="text-center">
    	      <div class="fw-medium fs-6">ì§„í–‰ ì¤‘</div>
    	      <div class="text-muted fs-7">${data.doingCount}ê°œ</div>
    	    </div>
    	    <div class="text-center">
    	      <div class="fw-medium fs-6">ì˜ˆì •</div>
    	      <div class="text-muted fs-7">${data.upcomingCount}ê°œ</div>
    	    </div>
    	    <div class="text-center">
    	      <div class="fw-medium fs-6">ì™„ë£Œ</div>
    	      <div class="text-muted fs-7">${data.doneCount}ê°œ</div>
    	    </div>
    	  </div>
    	`;
    }
  })
  .catch(err => {
    console.error("í”„ë¡œì íŠ¸ ìš”ì•½ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
  });
</script>
        <script>
        // OpenWeatherMap APIì—ì„œ ì§€ì›í•˜ëŠ” ì£¼ìš” í•œêµ­ ë„ì‹œë“¤ì„ í•œêµ­ì–´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function mapCityName(cityName) {
            const cityMap = {
                "Seoul": "ì„œìš¸",
                "Busan": "ë¶€ì‚°",
                "Incheon": "ì¸ì²œ",
                "Daegu": "ëŒ€êµ¬",
                "Daejeon": "ëŒ€ì „",
                "Gwangju": "ê´‘ì£¼",
                "Suwon": "ìˆ˜ì›",
                "Changwon": "ì°½ì›",
                "Gimhae": "ê¹€í•´",
                "Jeonju": "ì „ì£¼",
                "Cheongju": "ì²­ì£¼",
                "Jeju": "ì œì£¼"
            };
            return cityMap[cityName] || cityName;
        }

        document.addEventListener("DOMContentLoaded", function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    getWeatherByCoords(lat, lon);  // í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ í˜¸ì¶œ
                }, function (error) {
                    console.warn("ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œìš¸ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.");
                    getWeatherByCity("Seoul"); // ìœ„ì¹˜ ì‹¤íŒ¨ ì‹œ fallback
                });
            } else {
                console.warn("Geolocationì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„œìš¸ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.");
                getWeatherByCity("Seoul");
            }
        });

        // ë‚ ì”¨ ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function displayWeatherData(data, cityName) {
            document.getElementById("city-name").textContent = cityName;  // ë³€í™˜ëœ ë„ì‹œëª…
            document.getElementById("temperature").textContent = `ê¸°ì˜¨: ${data.main.temp}â„ƒ`;
            document.getElementById("description").textContent = `ë‚ ì”¨: ${data.weather[0].description}`;
            document.getElementById("humidity").textContent = `ìŠµë„: ${data.main.humidity}%`;
            document.getElementById("wind").textContent = `ë°”ëŒ: ${data.wind.speed} m/s`;

            const iconCode = data.weather[0].icon;
            document.getElementById("weather-icon").src = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
        }

        // ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒëœ ë„ì‹œì˜ ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        document.getElementById("city-selector").addEventListener("change", function () {
            const city = this.value;
            if (city === "current") {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    getWeatherByCoords(lat, lon);  // í˜„ì¬ ìœ„ì¹˜ ë‚ ì”¨
                });
            } else {
                getWeatherByCity(city);  // ì„ íƒëœ ë„ì‹œì˜ ë‚ ì”¨
            }
        });

        // GPSë¡œ í˜„ì¬ ìœ„ì¹˜ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
        function getWeatherByCoords(lat, lon) {
            fetch(`/api/weather/coord?lat=${lat}&lon=${lon}&lang=kr`)  // lang=kr ì¶”ê°€
                .then(response => response.json())
                .then(data => {
                    const cityName = mapCityName(data.name);  // ë¡œë§ˆì ë„ì‹œëª… -> í•œê¸€ë¡œ ë³€í™˜
                    displayWeatherData(data, cityName);  // ë³€í™˜ëœ ë„ì‹œëª… ì „ë‹¬
                })
                .catch(err => {
                    console.error("ë‚ ì”¨ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
                });
        }

        // ë„ì‹œëª…ì— ë§ëŠ” ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
        function getWeatherByCity(city) {
            fetch(`/api/weather?city=${city}&lang=kr`)  // lang=kr ì¶”ê°€
                .then(response => response.json())
                .then(data => {
                    const cityName = mapCityName(data.name);  // ë¡œë§ˆì ë„ì‹œëª… -> í•œê¸€ë¡œ ë³€í™˜
                    displayWeatherData(data, cityName);  // ë³€í™˜ëœ ë„ì‹œëª… ì „ë‹¬
                })
                .catch(err => {
                    console.error("ë‚ ì”¨ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
                });
        }
    </script>
   <script>
   let currentPage = 1;  // í˜„ì¬ í˜ì´ì§€ë¥¼ ì¶”ì 
   const totalNews = 10; // ì „ì²´ ë‰´ìŠ¤ ê°œìˆ˜ (ì˜ˆì‹œë¡œ 10ê°œ ë‰´ìŠ¤ í•­ëª© ì‚¬ìš©)
	
   if(false){
	   
   function loadNews() {
       fetch('/api/news?query=IT&language=ko&page=' + currentPage + '&size=1')  // IT ë‰´ìŠ¤ 1ê°œë§Œ ê°€ì ¸ì˜¤ê¸°
           .then(response => response.json())
           .then(data => {
               const article = data.articles[0];  // ì²« ë²ˆì§¸ ê¸°ì‚¬ë§Œ ê°€ì ¸ì˜´

               // ë‰´ìŠ¤ ì¹´ë“œì— ë‚´ìš© ì±„ìš°ê¸°
               const newsTitle = document.getElementById('newsTitle');
               const newsDescription = document.getElementById('newsDescription');
               const newsImage = document.getElementById('newsImage');
               const newsLink = document.getElementById('newsLink');
               
               newsTitle.innerHTML = article.title || 'ë‰´ìŠ¤ ì œëª©';
               newsDescription.innerHTML = article.description || 'ë‰´ìŠ¤ì˜ ê°„ëµí•œ ì„¤ëª…ì„ ì—¬ê¸°ì— ì‘ì„±í•©ë‹ˆë‹¤.';
               
               // ì´ë¯¸ì§€ URLì´ ìˆìœ¼ë©´ ì‚¬ìš©í•˜ê³ , ì—†ìœ¼ë©´ ê¸°ë³¸ ì´ë¯¸ì§€ ì‚¬ìš©
               newsImage.src = article.urlToImage || 'https://via.placeholder.com/150';
               
               // ë‰´ìŠ¤ ë§í¬ ì„¤ì •
               newsLink.href = article.url || '#';  // ë‰´ìŠ¤ URLì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ '#'

               // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì¦ê°€ì‹œì¼œì„œ ë‹¤ìŒ ë‰´ìŠ¤ë¡œ ì´ë™
               currentPage = (currentPage % totalNews) + 1; // í˜ì´ì§€ ë²ˆí˜¸ ìˆœí™˜
           })
           .catch(error => {
               console.error('ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì— ì˜¤ë¥˜ ë°œìƒ:', error);
           });
   }

   // ìŠ¬ë¼ì´ë“œ ê¸°ëŠ¥ (5ì´ˆë§ˆë‹¤)
   setInterval(function() {
       loadNews();
   }, 5000);  // 5ì´ˆë§ˆë‹¤ ë‰´ìŠ¤ê°€ ë³€ê²½ë¨

   // 20ë¶„ë§ˆë‹¤ ìƒˆë¡œìš´ ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
   setInterval(function() {
       loadNews();
   }, 1200000);  // 20ë¶„ = 1200000ms

   // í˜ì´ì§€ ë¡œë“œ ì‹œ ë‰´ìŠ¤ ë°ì´í„° ë¡œë“œ
   window.onload = loadNews;  // ì´ˆê¸° ë¡œë”© ì‹œì—ë„ ë‰´ìŠ¤ í•œ ê°œë¥¼ ë¶ˆëŸ¬ì˜´
</script>
<!-- ê²°ì¬ ê´€ë ¨ ë¹„ë™ê¸° -->
<script>
//íƒ­ ìš”ì†Œë“¤ ê°€ì ¸ì˜¤ê¸°
const approvalOngoingTab = document.getElementById('approvalOngoingInner');
const approvalPendingTab = document.getElementById('approvalPendingInner');
const approvalCompletedTab = document.getElementById('approvalCompletedInner');


//âœ… Carousel ë¡œë”© í•¨ìˆ˜
async function loadApprovalCarousel(target, endpoint, indicators) {
    try {
        const res = await fetch(endpoint);
        if (!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜: ' + res.status);

        const data = await res.json();
        console.log(`âœ… ${endpoint} ì‘ë‹µ ê²°ê³¼:`, data);

        // âœ… ì´ˆê¸°í™”
        target.innerHTML = '';
        indicators.innerHTML = '';

        if (!data || !Array.isArray(data) || data.length === 0) {
        	nothingHtmlFormS = `
                <div class="carousel-item active">
            	<div class="text-center mb-2">
				<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-primary me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-primary me-1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ì§„í–‰ ì¤‘ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-primary-soft cursor-pointer">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                          ì§„í–‰ì¤‘ì¸ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
                        </h5>
                    </div>
                </div>
            `;
        	nothingHtmlFormToMe = `
                <div class="carousel-item active">
            	<div class="text-center mb-2">
            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="" ><path fill="#FFD700" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ë‚´ê²Œ ì˜¨ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-warning-soft cursor-pointer">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                        	ë‚´ê²Œ ì˜¨ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
                        </h5>
                    </div>
                </div>
            `;
        	nothingHtmlFormAD = `
                <div class="carousel-item active">
            	<div class="text-center mb-2">
            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-success mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-danger mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ì™„ë£Œëœ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-success-soft cursor-pointer">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                        	ì™„ë£Œëœ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
                        </h5>
                    </div>
                </div>
            `;
            
            

			if(endpoint == '/mainpage/approval/ongoing'){
				target.innerHTML += nothingHtmlFormS
			} else if(endpoint == '/mainpage/approval/pending'){
				target.innerHTML += nothingHtmlFormToMe
			} else if(endpoint == '/mainpage/approval/completed'){
				target.innerHTML += nothingHtmlFormAD
			} 
            return;
        }

        // âœ… ìŠ¬ë¼ì´ë“œ ìƒì„±
        data.forEach((item, index) => {
            const approvalTitle = item.approval_title ?? 'ì œëª© ì—†ìŒ';
            const approvalNo = item.approval_no ?? 0;
            const displayDate = item.approval_display_date ?? '-';
            const completedDate = item.approval_completed_date ?? '-';
			const approvalStatus = item.approval_status ?? '-';
			const approvalWriter = item.approval_writer ?? '-';
            // ìŠ¬ë¼ì´ë“œ í•­ëª© 
            const htmlFormS = `
                <div class="carousel-item ${index === 0 ? 'active' : ''}">
            	<div class="text-center mb-2">
				<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-primary me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-primary me-1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ì§„í–‰ ì¤‘ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-primary-soft cursor-pointer"
                        onclick="location.href='/approval/${approvalNo}/detail'">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                          ${approvalTitle}
                        </h5>
                        <p class="mb-0 text-muted fs-9">ê¸°ì•ˆì¼ : ${displayDate}</p>
                    </div>
                </div>
            `;
            const htmlFormA = `
                <div class="carousel-item ${index === 0 ? 'active' : ''}">
            	<div class="text-center mb-2">
				<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-success mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ìŠ¹ì¸ëœ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-success-soft cursor-pointer"
                        onclick="location.href='/approval/${approvalNo}/detail'">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                          ${approvalTitle}
                        </h5>
                        <p class="mb-0 text-muted fs-9">ì™„ë£Œì¼ : ${completedDate}</p>
                    </div>
                </div>
            `;
            const htmlFormD = `
                <div class="carousel-item ${index === 0 ? 'active' : ''}">
            	<div class="text-center mb-2">
            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-danger mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ë°˜ë ¤ëœ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-fail-soft cursor-pointer"
                        onclick="location.href='/approval/${approvalNo}/detail'">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                          ${approvalTitle}
                        </h5>
                        <p class="mb-0 text-muted fs-9">ì™„ë£Œì¼ : ${completedDate}</p>
                    </div>
                </div>
            `;
            const htmlFormToMe = `
                <div class="carousel-item ${index === 0 ? 'active' : ''}">
            	<div class="text-center mb-2">
            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="" ><path fill="#FFD700" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
				<span class="fw-bold fs-9">ë‚´ê²Œ ì˜¨ ê²°ì¬</span>
			</div>
                    <div class="border rounded p-3 bg-warning-soft cursor-pointer"
                        onclick="location.href='/approval/${approvalNo}/detail'">
                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
                          ${approvalTitle}
                        </h5>
                        <p class="mb-0 text-muted fs-9">ê¸°ì•ˆì¼ : ${displayDate} / ê¸°ì•ˆì : ${approvalWriter}</p>
                    </div>
                </div>
            `;
			/* if (approvalStatus === 'S') {
			    if (approval_toMe) {
			        target.innerHTML += htmlFormToMe;
			    } else {
			        target.innerHTML += htmlFormS;
			    }
			} else if (approvalStatus === 'A') {
			    target.innerHTML += htmlFormA;
			} else if (approvalStatus === 'D') {
			    target.innerHTML += htmlFormD;
			} */
			if(endpoint == '/mainpage/approval/ongoing'){
				target.innerHTML += htmlFormS
			} else if(endpoint == '/mainpage/approval/pending'){
				target.innerHTML += htmlFormToMe
			} else if(endpoint == '/mainpage/approval/completed'){
				if(approvalStatus === 'A'){
					target.innerHTML += htmlFormA
				} else if(approvalStatus === 'D'){
					target.innerHTML += htmlFormD
				}
			} 

            // ì¸ë””ì¼€ì´í„° ìƒì„±
            indicators.innerHTML += `
                <button type="button" data-bs-target="#${target.id}" data-bs-slide-to="${index}"
                        class="${index === 0 ? 'active' : ''}" aria-label="ìŠ¬ë¼ì´ë“œ ${index + 1}"></button>
            `;
            
            
            
        });
        

    } catch (error) {
        console.error(`âŒ ${endpoint} ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:`, error);
    }
}

// âœ… ë¡œë”© ì‹¤í–‰
loadApprovalCarousel(
    document.getElementById('ongoingCarouselInner'), 
    '/mainpage/approval/ongoing', 
    document.getElementById('ongoingCarouselIndicators')
);

loadApprovalCarousel(
    document.getElementById('pendingCarouselInner'), 
    '/mainpage/approval/pending', 
    document.getElementById('pendingCarouselIndicators')
);

loadApprovalCarousel(
    document.getElementById('completedCarouselInner'), 
    '/mainpage/approval/completed', 
    document.getElementById('completedCarouselIndicators')
);
</script>


    

  </div>
</main>
</body>
</html>
