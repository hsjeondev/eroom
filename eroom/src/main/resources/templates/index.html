<!DOCTYPE html>
<html lang="ko-KR" dir="ltr" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{include/layout}">
<head>
<meta charset="UTF-8">
<title>Home</title>
<style>
.custom-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: repeat(3, 1fr);
	gap: 12px;
	height: 83vh;
	box-sizing: border-box;
}

.custom-grid>div {
	display: flex;
}

.attendance-card {
	flex: 1;
	display: flex;
	flex-direction: column;
}
/* ì¶œí‡´ê·¼ ì¹´ë“œ ë‚ ì§œë¶€ë¶„ í—¤ë” */
.card-header.custom-header {
  /* height: 56px; 
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 1rem;
  border-bottom: 1px solid #dee2e6; 
  font-size: 1.2rem; 
  font-weight: 600; */
  color: #495057;
}

.card {
	flex: 1;
	display: flex;
	flex-direction: column;
	height: 100%;
}

.card-body {
	flex: 1;
	padding: 16px;
	display: flex;
	flex-direction: column;
	justify-content: center;
}

/* ì˜¤ëŠ˜ ì¼ì •: 2í–‰ ë³‘í•© */
.card-tall {
	grid-column: 3;
	grid-row: span 2;
}

.current-time {
	font-size: 1.2rem;
	color: #6c757d;
	text-align: center;
	margin: 0;
	/* margin-bottom: 0.5rem; */
}

.profile-img {
	width: 64px;
	height: 64px;
}

.btn-wrap {
	border-top: none; /* 1px dashed #dee2e6; */
	padding-top: 0;           /* ë²„íŠ¼ê³¼ ìœ„ ìš”ì†Œ ì‚¬ì´ ì—¬ë°± ì œê±° */
	margin-top: 0;            /* ë²„íŠ¼ì´ ì•„ë˜ë¡œ ë°€ë¦¬ì§€ ì•Šë„ë¡ */
	align-self: center;       /* ì™¼ìª½ í”„ë¡œí•„ê³¼ ìˆ˜ì§ ê¸°ì¤€ ë§ì¶”ê¸° */
	margin-top: -3px;         /* í•„ìš” ì‹œ ì•½ê°„ ìœ„ë¡œ ì˜¬ë¦¬ê¸° (ì¡°ì • ê°€ëŠ¥) */
}

.btn-wrap .btn {
	min-width: 120px;
}

.vertical-divider {
  width: 1px;
  height: 100px;
  background: repeating-linear-gradient(
    to bottom,
    #dee2e6,
    #dee2e6 4px,
    transparent 4px,
    transparent 8px
  );
  margin: 0 1rem;
}

/* ìŠ¤í¬ë¡¤ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì„ íƒì‚¬í•­ */
.fc-scroller {
	max-height: 390px !important; /* ğŸ”¥ ê¸°ì¡´ë³´ë‹¤ ë„‰ë„‰í•˜ê²Œ */
	overflow-y: auto !important;
}

#calendarContainer {
	overflow: hidden;
}

.fc-scroller::-webkit-scrollbar {
	width: 6px;
}

.fc-scroller::-webkit-scrollbar-thumb {
	background-color: rgba(0, 0, 0, 0.1);
	border-radius: 10px;
}

/* ë‚ ì§œ ì˜ì—­ ì œê±° */
.fc-list-day-text, .fc-list-day-cushion {
	display: none !important;
}

/* ê°€ìš´ë° ì  ì œê±° */
.fc-list-event-graphic {
	display: none !important;
}

.fc-list-event-time {
	width: 30% !important;
}

.fc-list-event-graphic {
	display: none !important;
	width: 0 !important;
}

.fc-list-event-title {
	width: 70% !important;
	overflow: hidden;
	text-align: center;
	text-overflow: ellipsis;
}

.fc-list-table {
	table-layout: fixed !important;
	width: 100%;
}

.fc-list-event-time {
	width: 30% !important;
	font-size: 15px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-align: center;
	padding-left: 6px;
}

/* ë‰´ìŠ¤ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.news-card {
	display: flex;
	align-items: center;
	width: 100%;
	max-width: 380px; /* ê¸°ì¡´ ì¹´ë“œ ì‚¬ì´ì¦ˆì™€ ë§ì¶”ê¸° */
	margin: 0 auto;
	border-radius: 10px;
	overflow: hidden;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.news-card img {
	width: 120px; /* ì´ë¯¸ì§€ ë„ˆë¹„ */
	height: 100px; /* ì´ë¯¸ì§€ ë†’ì´ */
	object-fit: cover; /* ì´ë¯¸ì§€ ë¹„ìœ¨ì„ ë§ì¶”ê³  ìë¥´ê¸° */
	margin-right: 15px; /* ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ê°„ ê°„ê²© */
	border-radius: 8px;
}

.news-card .card-body {
	display: flex;
	align-items: center;
}

.news-card .card-title {
	font-size: 1.1rem;
	font-weight: bold;
}

.news-card .card-text {
	font-size: 0.9rem;
	color: #666;
	height: 60px;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* ê²°ì¬ ê´€ë ¨ ìŠ¤íƒ€ì¼ íƒœê·¸ */
.bg-primary-soft {
	background-color: rgba(13, 110, 253, 0.1);
	/* Bootstrap primary with íˆ¬ëª…ë„ */
}

.bg-success-soft {
	background-color: rgba(25, 135, 84, 0.1);
	/* Bootstrap success with íˆ¬ëª…ë„ */
}

.bg-fail-soft {
	background-color: rgba(253, 175, 171, 0.5); /* 50% íˆ¬ëª…ë„ ì ìš© */
}

.bg-warning-soft {
	background-color: rgba(255, 193, 7, 0.1);
	/* Bootstrap Warning ìƒ‰ìƒì— íˆ¬ëª…ë„ ì ìš© */
}

.carousel-indicators {
	bottom: -26px; /* âœ… ê¸°ë³¸ë³´ë‹¤ ì•„ë˜ë¡œ ë‚´ë¦¼ */
	justify-content: center; /* âœ… ê°€ìš´ë° ì •ë ¬ (ê¸°ë³¸) */
}

.carousel-indicators [data-bs-target] {
	width: 10px;
	height: 3px;
	/*   background-color: rgba(13, 110, 253, 0.5); */ /* ë°˜íˆ¬ëª… primary */
	background-color: rgba(108, 117, 125, 0.5); /* secondary ë°˜íˆ¬ëª… */
	border: none;
}

.carousel-indicators .active {
	/*  background-color: #0d6efd; */ /* í™œì„±í™”ëœ ì  */
	background-color: #6c757d; /* secondary ì§„í•œ ìƒ‰ */
}
/* ê²°ì¬ ê´€ë ¨ ìŠ¤íƒ€ì¼ íƒœê·¸ */
</style>

</head>
<body>
	<main class="main" id="top">
		<div layout:fragment="content">
			<div class="container-fluid px-0">
				<div class="custom-grid">

					<!-- 1í–‰Â·1ì—´: ì¶œí‡´ê·¼ ì¹´ë“œ -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
						  <div class="card shadow-sm border-0">
						            <!-- ìƒë‹¨ í˜„ì¬ ì‹œê°„ -->
							<div class="card-header custom-header custom-header text-center py-3">
							        <div id="currentTime" class="current-time fw-semibold text-center"></div>
							
							</div>
						    <div class="card-body p-4">
						      <form id="attendanceForm" th:action="@{/log}" method="post" class="w-100">
						        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf_token}">
						        <input type="hidden" th:value="${#authentication.principal.employee.employeeNo}" name="employeeNo">
						        <input type="hidden" name="attendanceType" id="attendanceType">
						
						
						
						        <!-- ì¢Œìš° ë¶„ë¦¬ëœ ì •ë³´ ë¸”ëŸ­ -->
						        <div class="d-flex justify-content-center align-items-center flex-wrap gap-6">
						
						          <!-- ì™¼ìª½: í”„ë¡œí•„ + ì´ë¦„/ë¶€ì„œ -->
						          <div class="d-flex align-items-center">
						            <img id="profileImage" class="rounded-circle me-3 profile-img"
						                 src="" alt="í”„ë¡œí•„" style="display: none; height: 64px; width: 64px">
						            <div class="text-start">
						              <p class="fw-semibold fs-6 mb-1" th:text="${employee.employeeName}">ì´ë¦„</p>
						              <small th:if="${employee.structure != null}"
						                     th:text="|${employee.structure.codeName} / ${employee.employeePosition}|">
						                ë¶€ì„œ / ì§ê¸‰
						              </small>
						              <small th:if="${employee.structure == null}"
						                     th:text="|- / ${employee.employeePosition}|">
						                ë¶€ì„œ / ì§ê¸‰
						              </small>
						            </div>
						          </div>
						
							<div class="vertical-divider"></div>
						
						          <!-- ì˜¤ë¥¸ìª½: ì¶œê·¼/í‡´ê·¼ ë²„íŠ¼ + ì‹œê°„ -->
						          <div class="btn-wrap d-flex flex-column align-items-end">
						            <button id="checkInBtn" class="btn btn-outline-primary btn-sm mb-2"
						                    th:attr="disabled=${attendanceStatus != 'notCheckedIn'} ? 'disabled' : null"
						                    th:text="${attendanceStatus == 'checkedIn' || attendanceStatus == 'checkedOut'} ? ${checkInTime} : 'ì¶œê·¼í•˜ê¸°'">
						              ì¶œê·¼í•˜ê¸°
						            </button>
						            <button id="checkOutBtn" class="btn btn-primary btn-sm"
						                    th:attr="disabled=${attendanceStatus != 'checkedIn'} ? 'disabled' : null"
						                    th:text="${attendanceStatus == 'checkedOut'} ? ${checkOutTime} : 'í‡´ê·¼í•˜ê¸°'">
						              í‡´ê·¼í•˜ê¸°
						            </button>
						          </div>
						        </div>
						      </form>
						    </div>
						  </div>
						</div>
					</div>

					<!-- 1í–‰Â·2ì—´ ê²°ì¬ -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">
								<div class="card-header text-center py-3"
									style="text-align: center; font-size: 1.2rem; font-weight: bold; padding: 15px;">
									ê²°ì¬</div>
								<!-- Tab ë©”ë‰´ -->
								<div
									class="d-flex justify-content-between align-items-center mb-2">
									<div class="fw-bold text-dark" style="font-size: 0.9rem;"></div>
									<ul class="nav nav-underline fs-9 w-100" id="resTab"
										role="tablist" style="margin-bottom: 0;">
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link active"
											id="approvalPending-tab" data-bs-toggle="tab"
											href="#approvalPendingTab" role="tab"
											aria-controls="approvalPendingTab" aria-selected="true">ë‚´ê²Œ
												ì˜¨ ê²°ì¬</a></li>
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link"
											id="approvalOngoing-tab" data-bs-toggle="tab"
											href="#approvalOngoingTab" role="tab"
											aria-controls="approvalOngoingTab" aria-selected="false">ì§„í–‰
												ì¤‘ ê²°ì¬</a></li>
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link"
											id="approvalCompleted-tab" data-bs-toggle="tab"
											href="#approvalCompletedTab" role="tab"
											aria-controls="approvalCompletedTab" aria-selected="false">ì™„ë£Œëœ
												ê²°ì¬</a></li>
									</ul>
								</div>

								<!-- íƒ­ ë‚´ìš© -->
								<div class="tab-content mb-4">

									<!-- ìŠ¹ì¸/ë°˜ë ¤ ëŒ€ê¸° -->
									<div class="tab-pane fade show active" id="approvalPendingTab">
										<div class="carousel slide" id="approvalPendingCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators"
												id="pendingCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center"
												id="pendingCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalPendingCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalPendingCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>

										</div>
									</div>

									<!-- ì§„í–‰ ì¤‘ ê²°ì¬ -->
									<div class="tab-pane fade" id="approvalOngoingTab">
										<div class="carousel slide" id="approvalOngoingCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators"
												id="ongoingCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center"
												id="ongoingCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalOngoingCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalOngoingCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>

										</div>
									</div>


									<!-- ìŠ¹ì¸ëœ ê²°ì¬ -->
									<div class="tab-pane fade" id="approvalCompletedTab">
										<div class="carousel slide" id="approvalCompletedCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators"
												id="completedCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center"
												id="completedCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalCompletedCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#approvalCompletedCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 1~2í–‰Â·3ì—´ (ìœ„ ë‘ ì¹¸ í•©ì¹¨) -->
					<div class="text-white p-1 card-tall">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">

								<!-- í—¤ë” -->
								<div class="card-header text-center py-3"
									style="font-size: 1.2rem; font-weight: bold;">ì˜¤ëŠ˜ ì¼ì •</div>

								<!-- ë°”ë”” -->
								<div class="card-body d-flex flex-column">
									<div id="calendarContainer" class="flex-grow-1">
										<div id="appCalendar"></div>
									</div>
								</div>

							</div>
						</div>
					</div>

					<!-- 2í–‰Â·1ì—´ í”„ë¡œì íŠ¸ -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">
								<div class="card-header text-center py-3"
									style="text-align: center; font-size: 1.2rem; font-weight: bold; padding: 15px;">
									ì°¸ì—¬ í”„ë¡œì íŠ¸</div>
								<!-- Tab ë©”ë‰´ -->
								<div
									class="d-flex justify-content-between align-items-center mb-2">
									<div class="fw-bold text-dark" style="font-size: 0.9rem;"></div>
									<ul class="nav nav-underline fs-9 w-100" id="resTab"
										role="tablist" style="margin-bottom: 0;">
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link active"
											id="projectDoing-tab" data-bs-toggle="tab"
											href="#projectDoingTab" role="tab"
											aria-controls="projectDoingTab" aria-selected="true">ì§„í–‰ ì¤‘</a>
										</li>
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link"
											id="projectYet-tab" data-bs-toggle="tab"
											href="#projectYetTab" role="tab"
											aria-controls="projectYetTab" aria-selected="false">ì§„í–‰ ì˜ˆì •</a>
										</li>
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link"
											id="projectDone-tab" data-bs-toggle="tab"
											href="#projectDoneTab" role="tab"
											aria-controls="projectDoneTab" aria-selected="false">ì™„ë£Œ</a></li>
									</ul>
								</div>

								<!-- íƒ­ ë‚´ìš© -->
								<div class="tab-content mb-4">

									<!-- ìŠ¹ì¸/ë°˜ë ¤ ëŒ€ê¸° -->
									<div class="tab-pane fade show active" id="projectDoingTab">
										<div class="carousel slide" id="projectDoingCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators" id="doingCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center"
												id="doingCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectDoingCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectDoingCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>

										</div>
									</div>

									<!-- ì§„í–‰ ì˜ˆì • í”„ë¡œì íŠ¸ -->
									<div class="tab-pane fade" id="projectYetTab">
										<div class="carousel slide" id="projectYetCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators" id="yetCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center" id="yetCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectYetCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectYetCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>

										</div>
									</div>


									<!-- ì™„ë£Œëœ í”„ë¡œì íŠ¸ -->
									<div class="tab-pane fade" id="projectDoneTab">
										<div class="carousel slide" id="projectDoneCarousel">

											<!-- âœ… ì¸ë””ì¼€ì´í„° -->
											<div class="carousel-indicators" id="doneCarouselIndicators">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ìŠ¬ë¼ì´ë“œ í•­ëª© -->
											<div class="carousel-inner text-center"
												id="doneCarouselInner">
												<!-- JavaScriptì—ì„œ ë™ì  ë¡œë”© -->
											</div>

											<!-- âœ… ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectDoneCarousel"
												data-bs-slide="prev"
												style="top: 65%; left: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-left fs-7"></i>
											</button>
											<button
												class="position-absolute mx-3 border-0 bg-transparent text-secondary"
												type="button" data-bs-target="#projectDoneCarousel"
												data-bs-slide="next"
												style="top: 65%; right: -10px; transform: translateY(-50%); z-index: 2;">
												<i class="fas fa-chevron-right fs-7"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>


					<!-- 2í–‰Â·2ì—´ ì˜ˆì•½í•˜ê¸° ì˜ˆì•½ í˜„í™© ë³´ê¸° -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">

								<!-- ìƒë‹¨ ì œëª© -->
								<div class="card-header text-center py-3"
									style="font-size: 1.2rem; font-weight: bold;">ì˜ˆì•½</div>

								<!-- íƒ­ ë²„íŠ¼ -->
								<div
									class="d-flex justify-content-between align-items-center px-3 pt-2">
									<div class="fw-bold text-dark" style="font-size: 0.9rem;"></div>
									<ul class="nav nav-underline fs-9 w-100" id="resTab"
										role="tablist">
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link active"
											id="vehicle-tab" data-bs-toggle="tab" href="#tab-vehicle"
											role="tab" aria-controls="tab-vehicle" aria-selected="true">ì°¨ëŸ‰</a>
										</li>
										<li class="nav-item flex-grow-1 text-center"
											role="presentation"><a class="nav-link" id="room-tab"
											data-bs-toggle="tab" href="#tab-room" role="tab"
											aria-controls="tab-room" aria-selected="false">íšŒì˜ì‹¤</a></li>
									</ul>
								</div>

								<!-- ì¹´ë“œ ë³¸ë¬¸ -->
								<div class="card-body pt-2 pb-3 px-3">
									<div class="tab-content small" id="resTabContent"
										style="height: 100px; overflow-y: auto;">

										<!-- ì°¨ëŸ‰ íƒ­ -->
										<div class="tab-pane fade show active" id="tab-vehicle"
											role="tabpanel" aria-labelledby="vehicle-tab">
											<table class="table table-sm table-striped mb-0 text-center"
												style="font-size: 0.65rem;">
												<colgroup>
													<col style="width: 33%;">
													<col style="width: 34%;">
													<col style="width: 33%;">
												</colgroup>
												<thead>
													<tr>
														<th>ì°¨ëŸ‰</th>
														<th>ì˜ˆì•½ì</th>
														<th>ì‹œê°„</th>
													</tr>
												</thead>
												<tbody>
													<tr th:if="${#lists.isEmpty(todayReservations)}">
														<td colspan="3">ì˜¤ëŠ˜ ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.</td>
													</tr>
													<tr th:each="res : ${todayReservations}">
														<td th:text="${res.vehicleName}"></td>
														<td th:text="${res.reserverName}"></td>
														<td><span
															th:text="${#temporals.format(res.reservation_start, 'HH:mm')}"></span>
															~ <span
															th:text="${#temporals.format(res.reservation_end, 'HH:mm')}"></span>
														</td>
													</tr>
												</tbody>
											</table>
										</div>

										<!-- íšŒì˜ì‹¤ íƒ­ -->
										<div class="tab-pane fade" id="tab-room" role="tabpanel"
											aria-labelledby="room-tab">
											<table class="table table-sm table-striped mb-0 text-center"
												style="font-size: 0.65rem;">
												<colgroup>
													<col style="width: 33%;">
													<col style="width: 34%;">
													<col style="width: 33%;">
												</colgroup>
												<thead>
													<tr>
														<th>íšŒì˜ì‹¤</th>
														<th>ì˜ˆì•½ì</th>
														<th>ì‹œê°„</th>
													</tr>
												</thead>
												<tbody>
													<tr th:if="${#lists.isEmpty(todayRoomReservations)}">
														<td colspan="3">ì˜¤ëŠ˜ ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.</td>
													</tr>
													<tr th:each="res : ${todayRoomReservations}">
														<td th:text="${res.meetingRoomName}"></td>
														<td th:text="${res.reserverName}"></td>
														<td><span
															th:text="${#temporals.format(res.reservation_start, 'HH:mm')}"></span>
															~ <span
															th:text="${#temporals.format(res.reservation_end, 'HH:mm')}"></span>
														</td>
													</tr>
												</tbody>
											</table>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>

        <!-- 3í–‰Â·1ì—´ -->
		<div class="text-white p-1">
		    <div class="attendance-card mx-auto">
		        <div class="card shadow-sm border-0">
		    <div class="card-header text-center py-3" style="font-size: 1.2rem; font-weight: bold;">
			  ê¸´ê¸‰ ê³µì§€ê¸€
			</div>
			  <table class="table table-sm  mb-0 text-center" style="font-size: 1rem;">
			    <colgroup>
			      <col style="width: 50%;">
			      <col style="width: 50%;">
			    </colgroup>
			    <thead style="background-color: #fff;">
			      <tr>
			        <th>ì œëª©</th>
			        <th>ë“±ë¡ì¼</th>
			      </tr>
			    </thead>
			    </table>
			    <div style="height: 200px; overflow-y: auto;">
			    <table id="emergencyNoticeTable" class="table table-sm  mb-0 text-center" style="font-size: 1rem;">
				     <colgroup>
				     <col style="width: 50%;">
				     <col style="width: 50%;">
				   </colgroup>
				   <tbody>
			     
			    </tbody>
			  </table>
			  </div>
		</div>
		</div>
		</div>

			

					<!-- 3í–‰Â·2ì—´: ë‚ ì”¨ ì¹´ë“œ -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">

								<!-- ğŸ”µ í—¤ë” (ì˜¤ëŠ˜ ë‚ ì”¨) -->
								<div class="card-header"
									style="text-align: center; font-size: 1.2rem; font-weight: bold; padding: 15px;">
									ì˜¤ëŠ˜ ë‚ ì”¨</div>

								<!-- ğŸ”µ ë‚ ì”¨ ë³¸ë¬¸ -->
								<div class="card-body">
									<!-- ìƒë‹¨: ë„ì‹œëª…ê³¼ ì…€ë ‰íŠ¸ ë°•ìŠ¤ -->
									<div
										style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
										<h3 id="city-name"
											style="font-size: 1.1rem; font-weight: bold; color: black;">ë„ì‹œëª…</h3>
										<select id="city-selector"
											style="padding: 6px 12px; font-size: 0.95rem; border-radius: 8px; border: 1px solid #00bfff;">
											<option value="current">í˜„ì¬ ìœ„ì¹˜</option>
											<option value="Seoul">ì„œìš¸</option>
											<option value="Busan">ë¶€ì‚°</option>
											<option value="Incheon">ì¸ì²œ</option>
											<option value="Daegu">ëŒ€êµ¬</option>
											<option value="Daejeon">ëŒ€ì „</option>
											<option value="Gwangju">ê´‘ì£¼</option>
											<option value="Suwon">ìˆ˜ì›</option>
											<option value="Changwon">ì°½ì›</option>
											<option value="Gimhae">ê¹€í•´</option>
											<option value="Jeonju">ì „ì£¼</option>
											<option value="Cheongju">ì²­ì£¼</option>
											<option value="Jeju">ì œì£¼</option>
										</select>
									</div>

									<!-- í•˜ë‹¨: ë‚ ì”¨ ì •ë³´ + ì•„ì´ì½˜ ì •ë ¬ -->
									<div
										style="display: flex; justify-content: space-between; align-items: center;">
										<div style="color: black;">
											<p id="temperature">ê¸°ì˜¨: --â„ƒ</p>
											<p id="description">ë‚ ì”¨: --</p>
											<p id="humidity">ìŠµë„: --%</p>
											<p id="wind">ë°”ëŒ: -- m/s</p>
										</div>
										<div>
											<img id="weather-icon" src="" alt="ë‚ ì”¨ ì•„ì´ì½˜"
												style="width: 120px; height: 120px; border-radius: 20px; background-color: #f8f9fa; padding: 12px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;"
												onmouseover="this.style.transform='scale(1.08)'; this.style.boxShadow='0 8px 22px rgba(0, 0, 0, 0.2)';"
												onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 18px rgba(0, 0, 0, 0.15)';" />
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>

					<!-- 3í–‰Â·3ì—´: IT ë‰´ìŠ¤ -->
					<div class="text-white p-1">
						<div class="attendance-card mx-auto">
							<div class="card shadow-sm border-0">
								<!-- í—¤ë” -->
								<div class="card-header text-center fw-bold"
									style="font-size: 1.2rem; padding: 15px;">ì˜¤ëŠ˜ì IT ë‰´ìŠ¤</div>

								<a id="newsLink" href="#" target="_blank"
									class="text-decoration-none"> <!-- âœ… ì´ë¯¸ì§€: ê¹”ë”í•˜ê²Œ í…Œë‘ë¦¬ ë‘¥ê¸€ë¦¼ + ì—¬ë°± ìµœì†Œí™” -->
									<div style="padding: 5px 15px;">
										<img id="newsImage" src="" alt="ë‰´ìŠ¤ ì´ë¯¸ì§€"
											style="width: 100%; height: 160px; object-fit: cover; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);">
									</div> <!-- âœ… ë‚´ìš©: ì œëª©ê³¼ ì„¤ëª… ì—¬ë°± ì •ë¦¬ -->
									<div class="px-3 pt-3 pb-2">
										<h6 id="newsTitle" class="fw-semibold text-dark mb-1"
											style="font-size: 1rem;">ë‰´ìŠ¤ ì œëª©</h6>
										<p id="newsDescription" class="text-muted mb-0"
										   style="font-size: 0.85rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">
										   ë‰´ìŠ¤ ìš”ì•½
										</p>
									</div>

								</a>
							</div>
						</div>
					</div>


					<script>
    //ìº˜ë¦°ë”
   document.addEventListener('DOMContentLoaded', function () {
			  setTimeout(() => {
			    const todayStr = new Date().toISOString().slice(0, 10); // yyyy-MM-dd
			    const calendarEl = document.getElementById('appCalendar');

			    const insertedTables = new Set(); // colgroup ì¤‘ë³µ ì‚½ì… ë°©ì§€

			    const calendar = new FullCalendar.Calendar(calendarEl, {
			      initialView: 'listDay',
			      locale: 'ko',
			      noEventsContent: 'ì˜¤ëŠ˜ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤',
			      headerToolbar: false,
			      eventTimeFormat: {
			    	    hour: '2-digit',
			    	    minute: '2-digit',
			    	    hour12: false  // 24ì‹œê°„ì œë¡œ ì„¤ì •
			    	  },
			      validRange: {
			        start: todayStr,
			        end: todayStr
			      },
			      eventClick: function(info) {
			    	    info.jsEvent.preventDefault();
			    	    location.href = "/calendar/all"; 
			    	  },
			      height: '100%',
			      contentHeight: 'auto',
			      eventSources: [
			        {
			          url: '/calendar/list/all',
			          method: 'GET',
			          failure: () => console.error('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨'),
			          success: function (events) {
			              //console.log("ë°›ì•„ì˜¨ ì¼ì • ëª©ë¡:", events); // ì‘ë‹µ í™•ì¸ìš©
			              return events;
			        	}
			         }
			      ],
			      eventDidMount: function (info) {
			    	  const separator = info.event.extendedProps.separator || "";
			    	  const event = info.event;
			    	  const teamName = event.extendedProps.teamName || '';
			    	  const title = event.title;
			    	  
			    	  

			    	  // ì œëª©ì— íŒ€ëª… ë¶™ì´ê¸°
			    	  if (teamName && title && !title.startsWith(`[${teamName}]`)) {
			    	    event.setProp("title", `[${teamName}] ${title}`);
			    	  }

			    	  // ìƒ‰ìƒ ìŠ¤íƒ€ì¼ ì§€ì •
			    	  let backgroundColor = "#DDDDDD";
			    	  let borderColor = "#CCCCCC";
			    	  let textColor = "#000000";

			    	  if (separator.startsWith("A")) {
			    	    backgroundColor = "#F8D7DA";
			    	    borderColor = "#F5C6CB";
			    	    textColor = "#721C24";
			    	  }

			    	  if (separator.startsWith("T")) {
			    	    backgroundColor = "#BDE0FE";
			    	    borderColor = "#7FBFFF";
			    	    textColor = "#003366";
			    	  }

			    	  const titleEl = info.el.querySelector('.fc-list-event-title');
			    	  const timeEl = info.el.querySelector('.fc-list-event-time');
			    	  const rowEl = info.el.closest('tr');
			    	  
			    	  

			    	  // ì œëª© ìŠ¤íƒ€ì¼
			    	  if (titleEl) {
			    	    titleEl.style.backgroundColor = backgroundColor;
			    	    titleEl.style.border = `1px solid ${borderColor}`;
			    	    titleEl.style.color = textColor;
			    	    titleEl.style.borderRadius = "8px";
			    	    titleEl.style.padding = "6px 10px";     
			    	    titleEl.style.margin = "6px 0";         
			    	    titleEl.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
			    	    titleEl.style.fontWeight = "500";
			    	    titleEl.style.fontSize = "14px";
			    	  }
			    	  
			    	 
			    	  if (rowEl) {
			    	    rowEl.style.cursor = "pointer";
			    	    rowEl.style.height = "48px"; // ğŸ”¥ ë†’ì´ ì£¼ê¸°
			    	    rowEl.style.borderBottom = "4px solid transparent"; // ğŸ”¥ ì•„ë˜ ì—¬ë°± ëŠë‚Œ
			    	    rowEl.addEventListener("click", () => {
			    	      location.href = "/calendar/all";
			    	    });
			    	  }

			    	  // ì‹œê°„ ì…€ ìŠ¤íƒ€ì¼ (ì—¬ìœ  ì£¼ê¸°)
			    	  if (timeEl) {
			    	    timeEl.style.paddingTop = "6px";
			    	    timeEl.style.paddingBottom = "6px";
			    	  }

			    	  // ê° ì „ì²´ í–‰ì— ë§ˆìš°ìŠ¤ ì»¤ì„œ ë³€ê²½ + í´ë¦­ ì´ë™
			    	  rowEl.style.cursor = "pointer";
			    	  rowEl.addEventListener("click", () => {
			    	    location.href = "/calendar/all";
			    	  });

			    	  // colgroup ì‚½ì…
			    	  const table = document.querySelector('table.fc-list-table');
			    	  if (table && !insertedTables.has(table)) {
			    	    const colgroup = document.createElement('colgroup');

			    	    const col1 = document.createElement('col');
			    	    col1.style.width = '30%';

			    	    const col2 = document.createElement('col');
			    	    col2.style.width = '0';
			    	    col2.style.display = 'none';

			    	    const col3 = document.createElement('col');
			    	    col3.style.width = '70%';

			    	    colgroup.appendChild(col1);
			    	    colgroup.appendChild(col2);
			    	    colgroup.appendChild(col3);

			    	    const thead = table.querySelector('thead');
			    	    if (thead) {
			    	      table.insertBefore(colgroup, thead);
			    	    } else {
			    	      table.prepend(colgroup);
			    	    }

			    	    insertedTables.add(table);
			    	  }
			    	}
			    });

			    calendar.render();

			    // ìŠ¤í¬ë¡¤ ì¡°ì •
			    setTimeout(() => {
			      const scroller = document.querySelector('.fc-scroller');
			      if (scroller) {
			        scroller.style.maxHeight = '300px';
			        scroller.style.overflowY = 'auto';
			      }
			    }, 300);
			  }, 100);
			});

    
      document.addEventListener('DOMContentLoaded', function(){
        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        function updateCurrentTime() {
          const now = new Date();
          const year = now.getFullYear();
          const month = String(now.getMonth()+1).padStart(2,'0');
          const date = String(now.getDate()).padStart(2,'0');
          const hours = String(now.getHours()).padStart(2,'0');
          const minutes = String(now.getMinutes()).padStart(2,'0');
          const seconds = String(now.getSeconds()).padStart(2,'0');
          const formattedDateTime = `${year}ë…„${month}ì›”${date}ì¼ ${hours}:${minutes}:${seconds}`;
          document.getElementById('currentTime').innerText = formattedDateTime;
        }
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);

        const attendanceForm = document.getElementById('attendanceForm');
        const attendanceType = document.getElementById('attendanceType');
        const checkInBtn = document.getElementById('checkInBtn');
        const checkOutBtn = document.getElementById('checkOutBtn');

        // ì¶œê·¼
        checkInBtn.addEventListener('click', function(e){
          e.preventDefault();
          attendanceType.value = 'checkIn';
          const now = new Date();
          const time = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
          const formData = new FormData(attendanceForm);
          fetch("/log", {
            method: 'post',
            headers: {
              'header': document.querySelector('meta[name="_csrf_header"]').content,
              'X-CSRF-Token': document.querySelector('meta[name="_csrf"]').content
            },
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            alert(data.res_msg);
            if(data.res_code == 200){
              localStorage.setItem("attendanceStatus","checkedIn");
              localStorage.setItem("checkInTime",time);
              localStorage.setItem("attendanceDate",new Date().toISOString().split('T')[0]);
              location.reload();
            }
          })
          .catch(error => {
            console.error('ì¶œê·¼ ì˜¤ë¥˜:',error);
            alert('ì¶œê·¼ ì‹¤íŒ¨');
          });
        });

        // í‡´ê·¼
        checkOutBtn.addEventListener('click', function(e){
          e.preventDefault();
          if(!confirm("í‡´ê·¼ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
          attendanceType.value = 'checkOut';
          const now = new Date();
          const time = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
          const formData = new FormData(attendanceForm);
          fetch("/log", {
            method:'post',
            headers:{
              'header': document.querySelector('meta[name="_csrf_header"]').content,
              'X-CSRF-Token': document.querySelector('meta[name="_csrf"]').content
            },
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            alert(data.res_msg);
            if(data.res_code == 200){
              localStorage.setItem("attendanceStatus","checkedOut");
              localStorage.setItem("checkOutTime",time);
              localStorage.setItem("attendanceDate",new Date().toISOString().split('T')[0]);
              location.reload();
            }
          })
          .catch(error => {
            console.error('í‡´ê·¼ ì˜¤ë¥˜',error);
            alert('í‡´ê·¼ ì‹¤íŒ¨');
          });
        });

        const today = new Date().toISOString().split('T')[0];
        if(localStorage.getItem("attendanceDate") === today){
          // í•„ìš”ì‹œ ìƒíƒœ ë³µêµ¬ ë¡œì§ ë„£ê¸°
        }
        
        // í”„ë¡œí•„ ì‚¬ì§„
		const profile = document.getElementById('profileImage');
        fetch('/profile/image')
        	.then(response => response.json())
        	.then(data => {
        		if(data.profileImage){
        			if(profile){
        				profile.onload = () => profile.style.display = 'inline';
        				profile.src = data.profileImage;
        			}
        		}
        	})
        	.catch(error => {
        		console.error('í”„ë¡œí•„ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ : ',error);
        	});
      });
    </script>

					<!-- í”„ë¡œì íŠ¸ ê´€ë ¨ ë¹„ë™ê¸° -->
					<script>
	const projectDoingTab = document.getElementById('doingCarouselInner');
	const projectYetTab = document.getElementById('yetCarouselInner');
	const projectDoneTab = document.getElementById('doneCarouselInner');
	
	async function loadProjectCarousel(target, endpoint, indicators) {
	    try {
	        const res = await fetch(endpoint);
	        if (!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜: ' + res.status);
	        const data = await res.json();
	        console.log(`âœ… ${endpoint} ì‘ë‹µ ê²°ê³¼:`, data);
	
	        target.innerHTML = '';
	        indicators.innerHTML = '';
	
	        if (!data || !Array.isArray(data) || data.length === 0) {
	            let nothingHtml = `
	                <div class="carousel-item active">
	            	<div class="text-center">
		                <span class="fw-bold fs-9" style="visibility: hidden;">í”„ë¡œì íŠ¸</span>
		            </div>
	                    <div class="border rounded py-3 mx-5 bg-light-subtle cursor-pointer">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                            í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">-</p>
	                    </div>
	                </div>
	            `;
	            target.innerHTML += nothingHtml;
	            return;
	        }
	
	        data.forEach((item, index) => {
	            const projectTitle = item.project_name ?? 'ì œëª© ì—†ìŒ';
	            const projectNo = item.project_no ?? 0;
	            const proceed = item.proceed ?? '-'; // ì§„í–‰ ìƒíƒœ

	            // ë‚ ì§œ í¬ë§· í•¨ìˆ˜
	            const formatDate = (rawDate) => {
	                const date = new Date(rawDate);
	                const yyyy = date.getFullYear();
	                const mm = String(date.getMonth() + 1).padStart(2, '0');
	                const dd = String(date.getDate()).padStart(2, '0');
	                return `${yyyy}.${mm}.${dd}`;
	            };

	            // ì‹œì‘ì¼ ë˜ëŠ” ì¢…ë£Œì¼ í‘œì‹œ
	            let dateLabel = 'ì‹œì‘ì¼';
	            let dateValue = item.project_start ? formatDate(item.project_start) : '-';

	            if (proceed == 'ì™„ë£Œ' && item.project_end) {
	                dateLabel = 'ì¢…ë£Œì¼';
	                dateValue = formatDate(item.project_end);
	            }

	            const html = `
	                <div class="carousel-item ${index === 0 ? 'active' : ''}">
	                    <div class="text-center">
	                        <span class="fw-bold fs-15" style="visibility: hidden;">í”„ë¡œì íŠ¸</span>
	                    </div>
	                    <div class="border rounded py-3 mx-5 bg-primary-soft cursor-pointer"
	                        onclick="location.href='/project/detail/${projectNo}/main'">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ${projectTitle}
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">${dateLabel} : ${dateValue}</p>
	                    </div>
	                </div>
	            `;

	            target.innerHTML += html;

	            indicators.innerHTML += `
	                <button type="button" data-bs-target="#${target.id}" data-bs-slide-to="${index}"
	                        class="${index === 0 ? 'active' : ''}" aria-label="ìŠ¬ë¼ì´ë“œ ${index + 1}"></button>
	            `;
	        });



	
	    } catch (error) {
	        console.error(`âŒ ${endpoint} ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:`, error);
	    }
	}
	
	// âœ… ì‹¤ì œ í˜¸ì¶œ
	loadProjectCarousel(
	    document.getElementById('doingCarouselInner'),
	    '/project/mainpage/doing',
	    document.getElementById('doingCarouselIndicators')
	);
	
	loadProjectCarousel(
	    document.getElementById('yetCarouselInner'),
	    '/project/mainpage/yet',
	    document.getElementById('yetCarouselIndicators')
	);
	
	loadProjectCarousel(
	    document.getElementById('doneCarouselInner'),
	    '/project/mainpage/done',
	    document.getElementById('doneCarouselIndicators')
	);
	</script>


					<!-- ê²°ì¬ ê´€ë ¨ ë¹„ë™ê¸° -->
					<script>
	//íƒ­ ìš”ì†Œë“¤ ê°€ì ¸ì˜¤ê¸°
	const approvalOngoingTab = document.getElementById('approvalOngoingInner');
	const approvalPendingTab = document.getElementById('approvalPendingInner');
	const approvalCompletedTab = document.getElementById('approvalCompletedInner');
	
	
	//âœ… Carousel ë¡œë”© í•¨ìˆ˜
	async function loadApprovalCarousel(target, endpoint, indicators) {
	    try {
	        const res = await fetch(endpoint);
	        if (!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜: ' + res.status);
	
	        const data = await res.json();
	        console.log(`âœ… ${endpoint} ì‘ë‹µ ê²°ê³¼:`, data);
	
	        // âœ… ì´ˆê¸°í™”
	        target.innerHTML = '';
	        indicators.innerHTML = '';
	
	        if (!data || !Array.isArray(data) || data.length === 0) {
	        	nothingHtmlFormS = `
	                <div class="carousel-item active">
	            	<div class="text-center">
					<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-primary me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-primary me-1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ì§„í–‰ ì¤‘ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-primary-soft cursor-pointer">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ì§„í–‰ì¤‘ì¸ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
	                        </h5>
	                          <p class="mb-0 text-muted fs-9">ì‘ì„±í•œ ë‚´ ê²°ì¬ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
	                    </div>
	                </div>
	            `;
	        	nothingHtmlFormToMe = `
	                <div class="carousel-item active">
	            	<div class="text-center">
	            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="" ><path fill="#FFD700" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ë‚´ê²Œ ì˜¨ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-warning-soft cursor-pointer">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                        	ë‚´ê²Œ ì˜¨ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">ë‚´ ìŠ¹ì¸ì„ ëŒ€ê¸° ì¤‘ì¸ ê²°ì¬ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
	                    </div>
	                </div>
	            `;
	        	nothingHtmlFormAD = `
	                <div class="carousel-item active">
	            	<div class="text-center">
	            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-success mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
	            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-danger mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ì™„ë£Œëœ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-success-soft cursor-pointer">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                        	ì™„ë£Œëœ ê²°ì¬ê°€ ì—†ìŠµë‹ˆë‹¤.
	                        </h5>
	                            <p class="mb-0 text-muted fs-9">ìŠ¹ì¸/ë°˜ë ¤ ì™„ë£Œëœ ë‚´ ê²°ì¬ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
	                    </div>
	                </div>
	            `;
	            
	            
	
				if(endpoint == '/mainpage/approval/ongoing'){
					target.innerHTML += nothingHtmlFormS
				} else if(endpoint == '/mainpage/approval/pending'){
					target.innerHTML += nothingHtmlFormToMe
				} else if(endpoint == '/mainpage/approval/completed'){
					target.innerHTML += nothingHtmlFormAD
				} 
	            return;
	        }
	
	        // âœ… ìŠ¬ë¼ì´ë“œ ìƒì„±
	        data.forEach((item, index) => {
	            const approvalTitle = item.approval_title ?? 'ì œëª© ì—†ìŒ';
	            const approvalNo = item.approval_no ?? 0;
	            const displayDate = item.approval_display_date ?? '-';
	            const completedDate = item.approval_completed_date ?? '-';
				const approvalStatus = item.approval_status ?? '-';
				const approvalWriter = item.approval_writer ?? '-';
	            // ìŠ¬ë¼ì´ë“œ í•­ëª© 
	            const htmlFormS = `
	                <div class="carousel-item ${index === 0 ? 'active' : ''}">
	            	<div class="text-center">
					<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-primary me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-primary me-1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ì§„í–‰ ì¤‘ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-primary-soft cursor-pointer"
	                        onclick="location.href='/approval/${approvalNo}/detail'">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ${approvalTitle}
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">ê¸°ì•ˆì¼ : ${displayDate}</p>
	                    </div>
	                </div>
	            `;
	            const htmlFormA = `
	                <div class="carousel-item ${index === 0 ? 'active' : ''}">
	            	<div class="text-center">
					<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-success mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ìŠ¹ì¸ëœ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-success-soft cursor-pointer"
	                        onclick="location.href='/approval/${approvalNo}/detail'">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ${approvalTitle}
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">ì™„ë£Œì¼ : ${completedDate}</p>
	                    </div>
	                </div>
	            `;
	            const htmlFormD = `
	                <div class="carousel-item ${index === 0 ? 'active' : ''}">
	            	<div class="text-center">
	            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 text-danger mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ë°˜ë ¤ëœ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-fail-soft cursor-pointer"
	                        onclick="location.href='/approval/${approvalNo}/detail'">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ${approvalTitle}
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">ì™„ë£Œì¼ : ${completedDate}</p>
	                    </div>
	                </div>
	            `;
	            const htmlFormToMe = `
	                <div class="carousel-item ${index === 0 ? 'active' : ''}">
	            	<div class="text-center">
	            	<svg style="height: 12px;" class="svg-inline--fa fa-circle fs-10 mt-n1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="" ><path fill="#FFD700" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path></svg><!-- <i class="fas fa-circle fs-10 text-success mt-n1"></i> Font Awesome fontawesome.com -->
					<span class="fw-bold fs-9">ë‚´ê²Œ ì˜¨ ê²°ì¬</span>
				</div>
	                    <div class="border rounded py-3 mx-5 bg-warning-soft cursor-pointer"
	                        onclick="location.href='/approval/${approvalNo}/detail'">
	                        <h5 class="mb-1 fw-bold text-dark text-decoration-none">
	                          ${approvalTitle}
	                        </h5>
	                        <p class="mb-0 text-muted fs-9">ê¸°ì•ˆì¼ : ${displayDate} / ê¸°ì•ˆì : ${approvalWriter}</p>
	                    </div>
	                </div>
	            `;
				/* if (approvalStatus === 'S') {
				    if (approval_toMe) {
				        target.innerHTML += htmlFormToMe;
				    } else {
				        target.innerHTML += htmlFormS;
				    }
				} else if (approvalStatus === 'A') {
				    target.innerHTML += htmlFormA;
				} else if (approvalStatus === 'D') {
				    target.innerHTML += htmlFormD;
				} */
				if(endpoint == '/mainpage/approval/ongoing'){
					target.innerHTML += htmlFormS
				} else if(endpoint == '/mainpage/approval/pending'){
					target.innerHTML += htmlFormToMe
				} else if(endpoint == '/mainpage/approval/completed'){
					if(approvalStatus === 'A'){
						target.innerHTML += htmlFormA
					} else if(approvalStatus === 'D'){
						target.innerHTML += htmlFormD
					}
				} 
	
	            // ì¸ë””ì¼€ì´í„° ìƒì„±
	            indicators.innerHTML += `
	                <button type="button" data-bs-target="#${target.id}" data-bs-slide-to="${index}"
	                        class="${index === 0 ? 'active' : ''}" aria-label="ìŠ¬ë¼ì´ë“œ ${index + 1}"></button>
	            `;
	            
	            
	            
	        });
	        
	
	    } catch (error) {
	        console.error(`âŒ ${endpoint} ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:`, error);
	    }
	}
	
	// âœ… ë¡œë”© ì‹¤í–‰
	loadApprovalCarousel(
	    document.getElementById('ongoingCarouselInner'), 
	    '/mainpage/approval/ongoing', 
	    document.getElementById('ongoingCarouselIndicators')
	);
	
	loadApprovalCarousel(
	    document.getElementById('pendingCarouselInner'), 
	    '/mainpage/approval/pending', 
	    document.getElementById('pendingCarouselIndicators')
	);
	
	loadApprovalCarousel(
	    document.getElementById('completedCarouselInner'), 
	    '/mainpage/approval/completed', 
	    document.getElementById('completedCarouselIndicators')
	);
	</script>

					<script>
  let cachedNews = [];
  let currentNewsIndex = 0;

  function setDefaultNews() {
    document.getElementById("newsTitle").innerText = "â€œëˆˆ ê°ì•˜ë‹¤ ëœ¨ë‹ˆ ì„¸ìƒ ë°”ë€Œì–´ ìˆì—ˆë‹¤â€";
    document.getElementById("newsDescription").innerText = "AI ì„íŒ©íŠ¸, ë‘ë ¤ì›€ê³¼ ê¸°ëŒ€ ì†ì— ë‹¤ê°€ì˜¨ ê¸°ìˆ  í˜ëª…â€¦ GPTê°€ ë§Œë“  ì„¸ê³„, ìš°ë¦¬ëŠ” ì¤€ë¹„ëë‚˜?";
    document.getElementById("newsImage").src = "https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=640";
    document.getElementById("newsLink").href = "https://www.kmib.co.kr/article/view.asp?arcid=0028078159&code=61141111&cp=nv";
  }

  function showNews(index) {
    if (cachedNews.length === 0) return setDefaultNews();

    const article = cachedNews[index];
    document.getElementById("newsTitle").innerText = article.title || "ë‰´ìŠ¤ ì œëª©";
    document.getElementById("newsDescription").innerText = article.description || "ë‰´ìŠ¤ ì„¤ëª… ì—†ìŒ";
    document.getElementById("newsImage").src = article.urlToImage || "https://via.placeholder.com/150";
    document.getElementById("newsLink").href = article.url || "#";
  }

  function loadNewsOnce() {
    fetch('/api/news?query=IT&language=ko&page=1&size=10')
      .then(res => {
        if (!res.ok) throw new Error(`ë‰´ìŠ¤ API ì˜¤ë¥˜: ${res.status}`);
        return res.json();
      })
      .then(data => {
        if (!data.articles || data.articles.length === 0) {
          console.warn("ë°›ì€ ë‰´ìŠ¤ ì—†ìŒ â†’ ê¸°ë³¸ ë‰´ìŠ¤ ì‚¬ìš©");
          return setDefaultNews();
        }
        cachedNews = data.articles;
        currentNewsIndex = 0;
        showNews(currentNewsIndex);
      })
      .catch(error => {
        console.error("ë‰´ìŠ¤ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
        setDefaultNews();
      });
  }

  // 5ì´ˆë§ˆë‹¤ ìºì‹œëœ ë‰´ìŠ¤ ìŠ¬ë¼ì´ë“œ
  setInterval(() => {
    if (cachedNews.length === 0) return;
    currentNewsIndex = (currentNewsIndex + 1) % cachedNews.length;
    showNews(currentNewsIndex);
  }, 5000);

  // 2ì‹œê°„ë§ˆë‹¤ ìƒˆë¡œìš´ ë‰´ìŠ¤ ê°±ì‹ 
  setInterval(loadNewsOnce, 2 * 60 * 60 * 1000);

  // ìµœì´ˆ ë¡œë”© ì‹œ 1íšŒ ì‹¤í–‰
  window.onload = loadNewsOnce;
</script>

	<script>
		function mapCityName(cityName) {
		  const cityMap = {
		    "Seoul": "ì„œìš¸", "Busan": "ë¶€ì‚°", "Incheon": "ì¸ì²œ", "Daegu": "ëŒ€êµ¬",
		    "Daejeon": "ëŒ€ì „", "Gwangju": "ê´‘ì£¼", "Suwon": "ìˆ˜ì›", "Changwon": "ì°½ì›",
		    "Gimhae": "ê¹€í•´", "Jeonju": "ì „ì£¼", "Cheongju": "ì²­ì£¼", "Jeju": "ì œì£¼", "KwangmyÅng": "ê´‘ëª…"
		  };
		  return cityMap[cityName] || cityName;
		}
		
		function displayWeatherData(data, cityName) {
		  document.getElementById("city-name").textContent = cityName;
		  document.getElementById("temperature").textContent = `ê¸°ì˜¨: ${data.main.temp}â„ƒ`;
		  document.getElementById("description").textContent = `ë‚ ì”¨: ${data.weather[0].description}`;
		  document.getElementById("humidity").textContent = `ìŠµë„: ${data.main.humidity}%`;
		  document.getElementById("wind").textContent = `ë°”ëŒ: ${data.wind.speed} m/s`;
		
		  const iconCode = data.weather[0].icon;
		  document.getElementById("weather-icon").src = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
		}
		
		function getWeatherByCoords(lat, lon) {
		  fetch(`/api/weather/coord?lat=${lat}&lon=${lon}&lang=kr`)
		    .then(res => res.json())
		    .then(data => displayWeatherData(data, mapCityName(data.name)))
		    .catch(err => console.error("ìœ„ì¹˜ ê¸°ë°˜ ë‚ ì”¨ ì˜¤ë¥˜:", err));
		}
		
		function getWeatherByCity(city) {
		  fetch(`/api/weather?city=${city}&lang=kr`)
		    .then(res => res.json())
		    .then(data => displayWeatherData(data, mapCityName(data.name)))
		    .catch(err => console.error("ë„ì‹œ ê¸°ë°˜ ë‚ ì”¨ ì˜¤ë¥˜:", err));
		}
		
		document.addEventListener("DOMContentLoaded", () => {
		  if (navigator.geolocation) {
		    navigator.geolocation.getCurrentPosition(
		      pos => getWeatherByCoords(pos.coords.latitude, pos.coords.longitude),
		      err => {
		        console.warn("ìœ„ì¹˜ ì‹¤íŒ¨, ì„œìš¸ë¡œ ëŒ€ì²´");
		        getWeatherByCity("Seoul");
		      }
		    );
		  } else {
		    console.warn("Geolocation ë¯¸ì§€ì›, ì„œìš¸ë¡œ ëŒ€ì²´");
		    getWeatherByCity("Seoul");
		  }
		
		  document.getElementById("city-selector").addEventListener("change", e => {
		    const city = e.target.value;
		    if (city === "current") {
		      navigator.geolocation.getCurrentPosition(
		        pos => getWeatherByCoords(pos.coords.latitude, pos.coords.longitude)
		      );
		    } else {
		      getWeatherByCity(city);
		    }
		  });
		});
		</script>

					<script>
	
	
	document.addEventListener('DOMContentLoaded', () => {
		  fetch('/article/test-json')
		    .then(response => response.json())
		    .then(notices => {
		      const tbody = document.querySelector('#emergencyNoticeTable tbody');
		      tbody.innerHTML = '';

		      if (notices.length === 0) {
		        tbody.innerHTML = '<tr><td colspan="2">ê³µì§€ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
		      } else {
		        notices.forEach(notice => {
		          const tr = document.createElement('tr');

		          const titleTd = document.createElement('td');
		          titleTd.innerHTML = `<span class="badge bg-danger me-1">ê¸´ê¸‰</span>${notice.article_title}`;
		          titleTd.style.textAlign = 'left';
		          titleTd.style.paddingLeft = '35px';
		          const dateTd = document.createElement('td');
		          dateTd.style.paddingLeft = '20px';
		          const date = new Date(notice.article_reg_date);
		          if (!isNaN(date.getTime())) { // ë‚ ì§œ ìœ íš¨ì„± ì²´í¬
		            const formattedDate = date.toISOString().split('T')[0];  // yyyy-MM-dd
		            dateTd.textContent = formattedDate;
		          } else {
		            dateTd.textContent = '-';  // ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œì¼ ë•Œ ëŒ€ì²´ í…ìŠ¤íŠ¸
		            console.warn('Invalid date:', notice.articleRegDate);
		          }

		          tr.appendChild(titleTd);
		          tr.appendChild(dateTd);
		          tr.style.cursor = 'pointer';  // ë§ˆìš°ìŠ¤ ì»¤ì„œë„ ë³€ê²½
		          tr.addEventListener('click', () => {
		            // ì˜ˆ: ìƒì„¸ í˜ì´ì§€ URLì´ /article/detail/{article_no} ë¼ê³  ê°€ì •
		            window.location.href = `/article/notice/detail/${notice.article_no}`;
		          });
		          tbody.appendChild(tr);
		        });
		      }
		    })
		    .catch(error => {
		      const tbody = document.querySelector('#emergencyNoticeTable tbody');
		      tbody.innerHTML = '<tr><td colspan="2">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</td></tr>';
		      console.error('Fetch error:', error);
		    });
		});
	</script>

				</div>
	</main>
</body>
</html>
