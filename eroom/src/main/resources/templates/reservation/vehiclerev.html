<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/include/layout}">
<head>
<meta charset="UTF-8">
<title>ì°¨ëŸ‰ ëª©ë¡</title>
</head>

<body>
	<main class="main" id="top" layout:fragment="content">
		

		<div class="row">
			<!--  ì°¨ëŸ‰ ì˜ˆì•½ ëª©ë¡ (ì™¼ìª½) -->
			<div class="col-md-6">
				<div class="mb-3">
					<div class="d-flex align-items-center mb-2">
						<i class="fas fa-car me-2"></i> <span class="fw-bold fs-7">
							ì°¨ëŸ‰ ì˜ˆì•½</span>
					</div>

					<div id="vehicleTable"
						data-list='{"valueNames":["no","vehicle","passengers","date"], "page": 5, "pagination": true}'>
						<div class="table-responsive">
							<table class="table table-striped table-sm fs-9 mb-0 text-center">
								<thead class="text-center align-middle">
									<tr>
										<th class="sort" data-sort="no" style="width: 5%;">ë²ˆí˜¸</th>
										<th class="sort" data-sort="vehicle" style="width: 25%;">ì°¨ëŸ‰</th>
										<th class="sort" data-sort="passengers" style="width: 20%;">íƒ‘ìŠ¹
											ì¸ì›</th>
										<th class="sort" data-sort="date" style="width: 20%;">ë“±ë¡ì¼</th>
										<th style="width: 10%;"></th>
									</tr>
								</thead>
								<tbody class="list align-middle">
									<tr th:if="${#lists.isEmpty(list)}">
										<td colspan="4">ë“±ë¡ëœ ì°¨ëŸ‰ì´ ì—†ìŠµë‹ˆë‹¤ ğŸ˜“</td>
									</tr>
									<tr class="align-middle vehicle-row" th:if="${!#lists.isEmpty(list)}"
										th:each="result, resultstatus : ${list}">
										<td class="no" th:text="${resultstatus.count}"></td>
										<td class="vehicle" th:text="${result.facilityName}"></td>
										<td class="passengers" th:text="${result.facilityCapacity}"></td>
										<td class="date"
											th:text="${#temporals.format(result.facilityRegDate, 'yy-MM-dd')}"></td>
										<td class="text-end pe-0"><button
												class="btn btn-sm btn-outline-primary"
												data-bs-toggle="modal" data-bs-target="#addEventModal">
												ì˜ˆì•½í•˜ê¸°</button></td>
									</tr>
								</tbody>
							</table>
							</div>
						<!-- ì˜ˆì•½ ëª¨ë‹¬ ì°½ -->
						<div class="modal fade" id="addEventModal" tabindex="-1">
							<div class="modal-dialog modal-dialog-centered">
								<div class="modal-content border border-translucent">
									<form id="addEventForm" autocomplete="off" name="addEventForm">
										<div class="modal-header px-card border-0">
											<div
												class="w-100 d-flex justify-content-between align-items-start">
												<h5 class="mb-0 lh-sm text-body-highlight">ì¼ì • ë“±ë¡</h5>
												<button class="btn p-1 fs-10 text-body" type="button"
													data-bs-dismiss="modal" aria-label="Close">ë‹«ê¸°</button>
											</div>
										</div>
										<div class="mb-4"></div>
										<div class="modal-body p-card py-0">
											<!-- ìˆ¨ê²¨ì§„ ê°’ë“¤ -->
											<input type="hidden" name="employee_no"
												th:value="${#authentication.principal.employee.employeeNo}" />
											<input type="hidden" name="facility_no" value="F002" /> <input
												type="hidden" name="reservation_creator"
												th:value="${#authentication.principal.employee.employeeId}" />

											<!-- ì œëª© / ì¥ì†Œ ê°€ë¡œ ë°°ì¹˜ -->
											<div class="row mb-2">
												<div class="col-6">
													<label class="form-label" for="calendarTitle">ì œëª©</label> <input
														type="text" class="form-control form-control-sm"
														id="calendarTitle" name="company_title"
														placeholder="ì¼ì • ì œëª©" aria-label="ì¼ì • ì œëª©" />
												</div>
												<div class="col-6">
													<label class="form-label" for="calendarLocation">ì¥ì†Œ</label>
													<input type="text" class="form-control form-control-sm"
														id="calendarLocation" name="company_location"
														placeholder="ì¼ì • ì¥ì†Œ" aria-label="ì¼ì • ì¥ì†Œ" />
												</div>
											</div>

											<div class="mb-4"></div>

											<!-- ì‹œì‘ ì‹œê°„ / ì¢…ë£Œ ì‹œê°„ ê°€ë¡œ ë°°ì¹˜ -->
											<div class="row mb-3">
												<div class="col-6">
													<div class="mb-3">
														<label class="form-label" for="calendarStartTime">ì‹œì‘ì‹œê°„</label>
														<input class="form-control" id="calendarStartTime"
															type="datetime-local" name="calendar_start_time" />
													</div>
												</div>
												<div class="col-6">
													<div class="mb-3">
														<label class="form-label" for="calendarEndTime">ì¢…ë£Œì‹œê°„</label>
														<input class="form-control" id="calendarEndTime"
															type="datetime-local" name="calendar_end_time" />
													</div>
												</div>
											</div>

											<!-- ì„¤ëª… -->
											<div class="input-group input-group-sm mb-3">
												<span class="input-group-text">ì„¤ëª…</span> <input type="text"
													class="form-control" id="calendarContent"
													name="company_content" placeholder="ì¼ì • ì„¤ëª…"
													aria-label="ì¼ì • ì„¤ëª…" />
											</div>

											<!-- ë²„íŠ¼ -->
											<div
												class="modal-footer d-flex justify-content-between align-items-center border-0">
												<span></span>
												<button class="btn btn-primary px-4" type="submit">ì¼ì •
													ë“±ë¡</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>









						<!-- í˜ì´ì§• -->
						<div class="d-flex justify-content-center mt-3">
							<div class="d-flex">
								<button class="page-link disabled" data-list-pagination="prev"
									disabled>
									<i class="fas fa-chevron-left"></i>
								</button>
								<ul class="mb-0 pagination">
									<li class="active">
										<button class="page" type="button" data-i="1" data-page="5">1</button>
									</li>
								</ul>
								<button class="page-link pe-0" data-list-pagination="next"
									disabled>
									<i class="fas fa-chevron-right"></i>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>

		
			
			



			<!-- ìº˜ë¦°ë” (ì˜¤ë¥¸ìª½) -->
			<div class="col-md-6">
				<div class="calendar-outline" id="appCalendar"
					style="height: 400px;"></div>
				</div>
			</div>





		<script>
		document.addEventListener('DOMContentLoaded', function () {
			  const calendarEl = document.getElementById('appCalendar');
			  const calendar = new FullCalendar.Calendar(calendarEl, {
			      initialView: 'dayGridMonth',
			      locale: 'ko',
			      headerToolbar: {
			        left: 'prev,next today',
			        center: 'title',
			        right: ''
			      },
			      buttonText: {
			    	    today: 'ì˜¤ëŠ˜' 
			    	  },
			      dayMaxEventRows: true,
			      views: {
			        dayGridMonth: {
			          dayMaxEventRows: 3,
			          moreLinkText: "ë”ë³´ê¸°"		       
			          }
			      },
			      eventDisplay: 'block',
			      dayCellContent: function (info) {
			        return info.date.getDate();
			      }
			  });

			  // setTimeoutìœ¼ë¡œ ì•½ê°„ ëŠ¦ê²Œ ì‹¤í–‰í•´ì£¼ë©´ ìŠ¤íƒ€ì¼ ë¡œë”© ì´í›„ ì•ˆì „í•˜ê²Œ ê·¸ë ¤ì§
				/* <head>ì— ìˆëŠ” FullCalendar CSS íŒŒì¼ì´ ì•„ì§ ë¡œë“œ ì¤‘ì´ë¼
				ìº˜ë¦°ë”ëŠ” ê·¸ë ¤ì¡Œì§€ë§Œ ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë‚˜ì™€ë²„ë¦¼. */
			  setTimeout(() => {
			    calendar.render();
			  }, 0); 
			});
		</script>
	</main>
</body>
</html>